import{c as We,R as b,r as T,b as ue,u as he,j as n,s as Ye,k as He,l as Ve}from"./index-d58956f0.js";import{S as H}from"./Slider-c10c92e5.js";import{J as Ke,o as C,G as Ue,K as re,u as Qe,i as $,c as q,T as Xe,M as ie,f as I,l as ge,L as ve,e as Ze,h as Je,N as me,O as fe,P as et,Q as tt,U as rt,w as be,V as _e,W as J,X as it,Y as nt,y as at,Z as Ee,$ as st,E as Ae,I as ot,R as lt,B as ct,x as dt}from"./carbonFloor-73db6c38.js";const ut=We("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);function Re(e,t,i){if(t<1)return[];if(t===1&&i===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)if(i===void 0||i(e[a])===!0)r.push(e[a]);else return;return r}function ht(e,t,i){var r={width:e.width+t.width,height:e.height+t.height};return Ke(r,i)}function mt(e,t,i){var r=i==="width",a=e.x,o=e.y,s=e.width,c=e.height;return t===1?{start:r?a:o,end:r?a+s:o+c}:{start:r?a+s:o+c,end:r?a:o}}function U(e,t,i,r,a){if(e*t<e*r||e*t>e*a)return!1;var o=i();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-a)<=0}function ft(e,t){return Re(e,t+1)}function xt(e,t,i,r,a){for(var o=(r||[]).slice(),s=t.start,c=t.end,d=0,h=1,l=s,m=function(){var f=r==null?void 0:r[d];if(f===void 0)return{v:Re(r,h)};var p=d,y,j=function(){return y===void 0&&(y=i(f,p)),y},v=f.coordinate,g=d===0||U(e,v,j,l,c);g||(d=0,l=s,h+=1),g&&(l=v+e*(j()/2+a),d+=h)},u;h<=o.length;)if(u=m(),u)return u.v;return[]}function V(e){"@babel/helpers - typeof";return V=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(e)}function je(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?je(Object(i),!0).forEach(function(r){pt(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):je(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function pt(e,t,i){return t=yt(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yt(e){var t=gt(e,"string");return V(t)=="symbol"?t:t+""}function gt(e,t){if(V(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(V(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,i,r,a){for(var o=(r||[]).slice(),s=o.length,c=t.start,d=t.end,h=function(u){var x=o[u],f,p=function(){return f===void 0&&(f=i(x,u)),f};if(u===s-1){var y=e*(x.coordinate+e*p()/2-d);o[u]=x=k(k({},x),{},{tickCoord:y>0?x.coordinate-y*e:x.coordinate})}else o[u]=x=k(k({},x),{},{tickCoord:x.coordinate});var j=U(e,x.tickCoord,p,c,d);j&&(d=x.tickCoord-e*(p()/2+a),o[u]=k(k({},x),{},{isShow:!0}))},l=s-1;l>=0;l--)h(l);return o}function bt(e,t,i,r,a,o){var s=(r||[]).slice(),c=s.length,d=t.start,h=t.end;if(o){var l=r[c-1],m=i(l,c-1),u=e*(l.coordinate+e*m/2-h);s[c-1]=l=k(k({},l),{},{tickCoord:u>0?l.coordinate-u*e:l.coordinate});var x=U(e,l.tickCoord,function(){return m},d,h);x&&(h=l.tickCoord-e*(m/2+a),s[c-1]=k(k({},l),{},{isShow:!0}))}for(var f=o?c-1:c,p=function(v){var g=s[v],w,O=function(){return w===void 0&&(w=i(g,v)),w};if(v===0){var S=e*(g.coordinate-e*O()/2-d);s[v]=g=k(k({},g),{},{tickCoord:S<0?g.coordinate-S*e:g.coordinate})}else s[v]=g=k(k({},g),{},{tickCoord:g.coordinate});var _=U(e,g.tickCoord,O,d,h);_&&(d=g.tickCoord+e*(O()/2+a),s[v]=k(k({},g),{},{isShow:!0}))},y=0;y<f;y++)p(y);return s}function xe(e,t,i){var r=e.tick,a=e.ticks,o=e.viewBox,s=e.minTickGap,c=e.orientation,d=e.interval,h=e.tickFormatter,l=e.unit,m=e.angle;if(!a||!a.length||!r)return[];if(C(d)||Ue.isSsr)return ft(a,typeof d=="number"&&C(d)?d:0);var u=[],x=c==="top"||c==="bottom"?"width":"height",f=l&&x==="width"?re(l,{fontSize:t,letterSpacing:i}):{width:0,height:0},p=function(g,w){var O=$(h)?h(g.value,w):g.value;return x==="width"?ht(re(O,{fontSize:t,letterSpacing:i}),f,m):re(O,{fontSize:t,letterSpacing:i})[x]},y=a.length>=2?Qe(a[1].coordinate-a[0].coordinate):1,j=mt(o,y,x);return d==="equidistantPreserveStart"?xt(y,j,p,a,s):(d==="preserveStart"||d==="preserveStartEnd"?u=bt(y,j,p,a,s,d==="preserveStartEnd"):u=vt(y,j,p,a,s),u.filter(function(v){return v.isShow}))}var jt=["viewBox"],wt=["viewBox"],Nt=["ticks"];function L(e){"@babel/helpers - typeof";return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(e)}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},B.apply(this,arguments)}function we(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function N(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?we(Object(i),!0).forEach(function(r){pe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):we(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function ne(e,t){if(e==null)return{};var i=Ot(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ot(e,t){if(e==null)return{};var i={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;i[r]=e[r]}return i}function kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ze(r.key),r)}}function Pt(e,t,i){return t&&Ne(e.prototype,t),i&&Ne(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function St(e,t,i){return t=Q(t),Ct(e,$e()?Reflect.construct(t,i||[],Q(e).constructor):t.apply(e,i))}function Ct(e,t){if(t&&(L(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tt(e)}function Tt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($e=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Q(e)}function _t(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},se(e,t)}function pe(e,t,i){return t=ze(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ze(e){var t=Et(e,"string");return L(t)=="symbol"?t:t+""}function Et(e,t){if(L(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(L(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W=function(e){function t(i){var r;return kt(this,t),r=St(this,t,[i]),r.state={fontSize:"",letterSpacing:""},r}return _t(t,e),Pt(t,[{key:"shouldComponentUpdate",value:function(r,a){var o=r.viewBox,s=ne(r,jt),c=this.props,d=c.viewBox,h=ne(c,wt);return!ie(o,d)||!ie(s,h)||!ie(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,o=a.x,s=a.y,c=a.width,d=a.height,h=a.orientation,l=a.tickSize,m=a.mirror,u=a.tickMargin,x,f,p,y,j,v,g=m?-1:1,w=r.tickSize||l,O=C(r.tickCoord)?r.tickCoord:r.coordinate;switch(h){case"top":x=f=r.coordinate,y=s+ +!m*d,p=y-g*w,v=p-g*u,j=O;break;case"left":p=y=r.coordinate,f=o+ +!m*c,x=f-g*w,j=x-g*u,v=O;break;case"right":p=y=r.coordinate,f=o+ +m*c,x=f+g*w,j=x+g*u,v=O;break;default:x=f=r.coordinate,y=s+ +m*d,p=y+g*w,v=p+g*u,j=O;break}return{line:{x1:x,y1:p,x2:f,y2:y},tick:{x:j,y:v}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,o=r.mirror,s;switch(a){case"left":s=o?"start":"end";break;case"right":s=o?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,o=r.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=o?"start":"end";break;default:s=o?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,o=r.y,s=r.width,c=r.height,d=r.orientation,h=r.mirror,l=r.axisLine,m=N(N(N({},I(this.props,!1)),I(l,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var u=+(d==="top"&&!h||d==="bottom"&&h);m=N(N({},m),{},{x1:a,y1:o+u*c,x2:a+s,y2:o+u*c})}else{var x=+(d==="left"&&!h||d==="right"&&h);m=N(N({},m),{},{x1:a+x*s,y1:o,x2:a+x*s,y2:o+c})}return b.createElement("line",B({},m,{className:q("recharts-cartesian-axis-line",ge(l,"className"))}))}},{key:"renderTicks",value:function(r,a,o){var s=this,c=this.props,d=c.tickLine,h=c.stroke,l=c.tick,m=c.tickFormatter,u=c.unit,x=xe(N(N({},this.props),{},{ticks:r}),a,o),f=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),y=I(this.props,!1),j=I(l,!1),v=N(N({},y),{},{fill:"none"},I(d,!1)),g=x.map(function(w,O){var S=s.getTickLineCoord(w),_=S.line,Y=S.tick,M=N(N(N(N({textAnchor:f,verticalAnchor:p},y),{},{stroke:"none",fill:h},j),Y),{},{index:O,payload:w,visibleTicksCount:x.length,tickFormatter:m});return b.createElement(ve,B({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Ze(s.props,w,O)),d&&b.createElement("line",B({},v,_,{className:q("recharts-cartesian-axis-tick-line",ge(d,"className"))})),l&&t.renderTickItem(l,M,"".concat($(m)?m(w.value,O):w.value).concat(u||"")))});return b.createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var r=this,a=this.props,o=a.axisLine,s=a.width,c=a.height,d=a.ticksGenerator,h=a.className,l=a.hide;if(l)return null;var m=this.props,u=m.ticks,x=ne(m,Nt),f=u;return $(d)&&(f=u&&u.length>0?d(this.props):d(x)),s<=0||c<=0||!f||!f.length?null:b.createElement(ve,{className:q("recharts-cartesian-axis",h),ref:function(y){r.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(f,this.state.fontSize,this.state.letterSpacing),Je.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,o){var s,c=q(a.className,"recharts-cartesian-axis-tick-value");return b.isValidElement(r)?s=b.cloneElement(r,N(N({},a),{},{className:c})):$(r)?s=r(N(N({},a),{},{className:c})):s=b.createElement(Xe,B({},a,{className:"recharts-cartesian-axis-tick-value"}),o),s}}])}(T.Component);pe(W,"displayName","CartesianAxis");pe(W,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var At=["x1","y1","x2","y2","key"],Rt=["offset"];function z(e){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(e)}function Oe(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),i.push.apply(i,r)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Oe(Object(i),!0).forEach(function(r){$t(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Oe(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}function $t(e,t,i){return t=zt(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zt(e){var t=Mt(e,"string");return z(t)=="symbol"?t:t+""}function Mt(e,t){if(z(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(z(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},R.apply(this,arguments)}function ke(e,t){if(e==null)return{};var i=Ft(e,t),r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ft(e,t){if(e==null)return{};var i={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;i[r]=e[r]}return i}var It=function(t){var i=t.fill;if(!i||i==="none")return null;var r=t.fillOpacity,a=t.x,o=t.y,s=t.width,c=t.height,d=t.ry;return b.createElement("rect",{x:a,y:o,ry:d,width:s,height:c,stroke:"none",fill:i,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Me(e,t){var i;if(b.isValidElement(e))i=b.cloneElement(e,t);else if($(e))i=e(t);else{var r=t.x1,a=t.y1,o=t.x2,s=t.y2,c=t.key,d=ke(t,At),h=I(d,!1);h.offset;var l=ke(h,Rt);i=b.createElement("line",R({},l,{x1:r,y1:a,x2:o,y2:s,fill:"none",key:c}))}return i}function qt(e){var t=e.x,i=e.width,r=e.horizontal,a=r===void 0?!0:r,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var s=o.map(function(c,d){var h=P(P({},e),{},{x1:t,y1:c,x2:t+i,y2:c,key:"line-".concat(d),index:d});return Me(a,h)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Bt(e){var t=e.y,i=e.height,r=e.vertical,a=r===void 0?!0:r,o=e.verticalPoints;if(!a||!o||!o.length)return null;var s=o.map(function(c,d){var h=P(P({},e),{},{x1:c,y1:t,x2:c,y2:t+i,key:"line-".concat(d),index:d});return Me(a,h)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Lt(e){var t=e.horizontalFill,i=e.fillOpacity,r=e.x,a=e.y,o=e.width,s=e.height,c=e.horizontalPoints,d=e.horizontal,h=d===void 0?!0:d;if(!h||!t||!t.length)return null;var l=c.map(function(u){return Math.round(u+a-a)}).sort(function(u,x){return u-x});a!==l[0]&&l.unshift(0);var m=l.map(function(u,x){var f=!l[x+1],p=f?a+s-u:l[x+1]-u;if(p<=0)return null;var y=x%t.length;return b.createElement("rect",{key:"react-".concat(x),y:u,x:r,height:p,width:o,stroke:"none",fill:t[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Dt(e){var t=e.vertical,i=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,o=e.x,s=e.y,c=e.width,d=e.height,h=e.verticalPoints;if(!i||!r||!r.length)return null;var l=h.map(function(u){return Math.round(u+o-o)}).sort(function(u,x){return u-x});o!==l[0]&&l.unshift(0);var m=l.map(function(u,x){var f=!l[x+1],p=f?o+c-u:l[x+1]-u;if(p<=0)return null;var y=x%r.length;return b.createElement("rect",{key:"react-".concat(x),x:u,y:s,width:p,height:d,stroke:"none",fill:r[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Gt=function(t,i){var r=t.xAxis,a=t.width,o=t.height,s=t.offset;return _e(xe(P(P(P({},W.defaultProps),r),{},{ticks:J(r,!0),viewBox:{x:0,y:0,width:a,height:o}})),s.left,s.left+s.width,i)},Wt=function(t,i){var r=t.yAxis,a=t.width,o=t.height,s=t.offset;return _e(xe(P(P(P({},W.defaultProps),r),{},{ticks:J(r,!0),viewBox:{x:0,y:0,width:a,height:o}})),s.top,s.top+s.height,i)},F={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Fe(e){var t,i,r,a,o,s,c=me(),d=fe(),h=et(),l=P(P({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:F.stroke,fill:(i=e.fill)!==null&&i!==void 0?i:F.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:F.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:F.horizontalFill,vertical:(o=e.vertical)!==null&&o!==void 0?o:F.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:F.verticalFill,x:C(e.x)?e.x:h.left,y:C(e.y)?e.y:h.top,width:C(e.width)?e.width:h.width,height:C(e.height)?e.height:h.height}),m=l.x,u=l.y,x=l.width,f=l.height,p=l.syncWithTicks,y=l.horizontalValues,j=l.verticalValues,v=tt(),g=rt();if(!C(x)||x<=0||!C(f)||f<=0||!C(m)||m!==+m||!C(u)||u!==+u)return null;var w=l.verticalCoordinatesGenerator||Gt,O=l.horizontalCoordinatesGenerator||Wt,S=l.horizontalPoints,_=l.verticalPoints;if((!S||!S.length)&&$(O)){var Y=y&&y.length,M=O({yAxis:g?P(P({},g),{},{ticks:Y?y:g.ticks}):void 0,width:c,height:d,offset:h},Y?!0:p);be(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(z(M),"]")),Array.isArray(M)&&(S=M)}if((!_||!_.length)&&$(w)){var ye=j&&j.length,K=w({xAxis:v?P(P({},v),{},{ticks:ye?j:v.ticks}):void 0,width:c,height:d,offset:h},ye?!0:p);be(Array.isArray(K),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(z(K),"]")),Array.isArray(K)&&(_=K)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(It,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),b.createElement(qt,R({},l,{offset:h,horizontalPoints:S,xAxis:v,yAxis:g})),b.createElement(Bt,R({},l,{offset:h,verticalPoints:_,xAxis:v,yAxis:g})),b.createElement(Lt,R({},l,{horizontalPoints:S})),b.createElement(Dt,R({},l,{verticalPoints:_})))}Fe.displayName="CartesianGrid";function D(e){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(e)}function Yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Be(r.key),r)}}function Ht(e,t,i){return t&&Pe(e.prototype,t),i&&Pe(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vt(e,t,i){return t=X(t),Kt(e,Ie()?Reflect.construct(t,i||[],X(e).constructor):t.apply(e,i))}function Kt(e,t){if(t&&(D(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ut(e)}function Ut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ie=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},X(e)}function Qt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},oe(e,t)}function qe(e,t,i){return t=Be(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Be(e){var t=Xt(e,"string");return D(t)=="symbol"?t:t+""}function Xt(e,t){if(D(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(D(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},le.apply(this,arguments)}function Zt(e){var t=e.xAxisId,i=me(),r=fe(),a=it(t);return a==null?null:T.createElement(W,le({},a,{className:q("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:i,height:r},ticksGenerator:function(s){return J(s,!0)}}))}var ee=function(e){function t(){return Yt(this,t),Vt(this,t,arguments)}return Qt(t,e),Ht(t,[{key:"render",value:function(){return T.createElement(Zt,this.props)}}])}(T.Component);qe(ee,"displayName","XAxis");qe(ee,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function G(e){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(e)}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ge(r.key),r)}}function er(e,t,i){return t&&Se(e.prototype,t),i&&Se(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function tr(e,t,i){return t=Z(t),rr(e,Le()?Reflect.construct(t,i||[],Z(e).constructor):t.apply(e,i))}function rr(e,t){if(t&&(G(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ir(e)}function ir(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Le=function(){return!!e})()}function Z(e){return Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Z(e)}function nr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ce(e,t)}function De(e,t,i){return t=Ge(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ge(e){var t=ar(e,"string");return G(t)=="symbol"?t:t+""}function ar(e,t){if(G(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,t||"default");if(G(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},de.apply(this,arguments)}var sr=function(t){var i=t.yAxisId,r=me(),a=fe(),o=nt(i);return o==null?null:T.createElement(W,de({},o,{className:q("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(c){return J(c,!0)}}))},te=function(e){function t(){return Jt(this,t),tr(this,t,arguments)}return nr(t,e),er(t,[{key:"render",value:function(){return T.createElement(sr,this.props)}}])}(T.Component);De(te,"displayName","YAxis");De(te,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var or=at({chartName:"BarChart",GraphicalChild:Ee,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ee},{axisType:"yAxis",AxisComp:te}],formatAxisMap:st});const lr=()=>{const{parameters:e,updateParameter:t}=ue(),{sequestration:i}=he();return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:"Carbon Sequestration Activities"}),n.jsx("p",{className:"text-xs text-green-700",children:"Add nature-based and technology solutions to offset your farm's emissions."})]}),n.jsx(H,{label:"Tree Planting (hectares)",value:e.treePlantingHa,onChange:r=>t("treePlantingHa",r),min:0,max:50,step:1,unit:" ha",decimals:0,info:e.treePlantingHa>0?`↓ ${i.treeSequestration.toFixed(1)} t CO₂e/year`:void 0}),n.jsx(H,{label:"Hedgerow Planting (km)",value:e.hedgerowKm,onChange:r=>t("hedgerowKm",r),min:0,max:20,step:.5,unit:" km",decimals:1,info:e.hedgerowKm>0?`↓ ${i.hedgerowSequestration.toFixed(1)} t CO₂e/year`:void 0}),n.jsx(H,{label:"Soil Carbon Management (ha)",value:e.soilCarbonHa,onChange:r=>t("soilCarbonHa",r),min:0,max:100,step:5,unit:" ha",decimals:0,info:e.soilCarbonHa>0?`↓ ${i.soilCarbonSequestration.toFixed(1)} t CO₂e/year`:void 0}),n.jsx(H,{label:"Cover Crops (hectares)",value:e.coverCropsHa,onChange:r=>t("coverCropsHa",r),min:0,max:80,step:5,unit:" ha",decimals:0,info:e.coverCropsHa>0?`↓ ${i.coverCropSequestration.toFixed(1)} t CO₂e/year`:void 0}),n.jsx(H,{label:"Renewable Energy (kW)",value:e.renewableEnergyKw,onChange:r=>t("renewableEnergyKw",r),min:0,max:200,step:10,unit:" kW",decimals:0,info:e.renewableEnergyKw>0?`↓ ${i.renewableOffset.toFixed(1)} t CO₂e/year`:void 0}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{htmlFor:"methane-inhibitor-checkbox",className:"flex items-center text-sm",children:[n.jsx("input",{id:"methane-inhibitor-checkbox",name:"methane-inhibitor-checkbox",type:"checkbox",checked:e.methaneInhibitor,onChange:r=>t("methaneInhibitor",r.target.checked),className:"mr-2"}),n.jsx("span",{className:"font-medium",children:"Methane Inhibitor Feed Additive"})]}),e.methaneInhibitor&&n.jsxs("div",{className:"text-xs text-green-600 ml-6",children:["↓ ",i.methaneReduction.toFixed(1)," t CO₂e/year (15% reduction)"]}),n.jsxs("label",{htmlFor:"improved-manure-checkbox",className:"flex items-center text-sm",children:[n.jsx("input",{id:"improved-manure-checkbox",name:"improved-manure-checkbox",type:"checkbox",checked:e.improvedManure,onChange:r=>t("improvedManure",r.target.checked),className:"mr-2"}),n.jsx("span",{className:"font-medium",children:"Improved Manure Management"})]}),e.improvedManure&&n.jsxs("div",{className:"text-xs text-green-600 ml-6",children:["↓ ",i.improvedManureReduction.toFixed(1)," t CO₂e/year (30% reduction)"]})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mt-4",children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Sequestration Summary"}),n.jsxs("div",{className:"space-y-1 text-xs",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-700",children:"Nature-based Solutions:"}),n.jsxs("span",{className:"font-semibold text-blue-800",children:[(i.treeSequestration+i.hedgerowSequestration+i.soilCarbonSequestration+i.coverCropSequestration).toFixed(1)," t CO₂e"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-700",children:"Technology Solutions:"}),n.jsxs("span",{className:"font-semibold text-blue-800",children:[(i.renewableOffset+i.methaneReduction+i.improvedManureReduction).toFixed(1)," t CO₂e"]})]}),n.jsxs("div",{className:"flex justify-between border-t pt-1 mt-1",children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Total Sequestration:"}),n.jsxs("span",{className:"font-bold text-blue-900",children:[i.totalSequestration.toFixed(1)," t CO₂e/year"]})]})]})]})]})},cr=.02,dr=5,ae=new Date().getFullYear(),Ce=10,ur=()=>{const{parameters:e}=ue(),{emissions:t,sequestration:i}=he();return T.useMemo(()=>{const r=Ae(e.herdSize),a=t.totalAnnualEmissions*e.herdSize/1e3,o=i.totalSequestration,s=[];for(let l=0;l<Ce;l++){const m=ae+l,u=Math.pow(1-cr,l),x=a*u,f=Math.min(1,l/dr),p=o*f,y=Math.max(0,x-p),j=Ye(x-r/1e3,r/1e3,0)*100;s.push({year:m,gross:x,theoreticalMinimum:r/1e3,sequestration:p,net:y,percentAboveTM:j})}const c=s[s.length-1],d=c.net<=0,h=c.gross<=c.theoreticalMinimum;return{years:s,currentYear:ae,targetYear:ae+Ce-1,canReachNetZero:d,canReachTM:h}},[e,t,i])},hr=()=>{const{years:e,canReachNetZero:t,canReachTM:i}=ur(),{sequestration:r}=he();if(e.length===0)return null;const a=Math.max(...e.map(f=>f.gross)),o=Math.min(...e.map(f=>Math.min(f.net,0))),s=e[0].theoreticalMinimum,d=(a-o)*.1,h=a+d,l=Math.min(0,o-d),m=f=>320-(f-l)/(h-l)*280,u=f=>60+f/(e.length-1)*600;e.findIndex(f=>f.net<=0);const x=e.findIndex(f=>f.gross<=f.theoreticalMinimum);return n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[n.jsx(ut,{className:"mr-2 text-green-600",size:20}),"Net-Carbon Glide Path 2.0"]}),n.jsxs("div",{className:"relative",style:{height:"400px"},children:[n.jsxs("svg",{width:"100%",height:"360",viewBox:"0 0 700 360",preserveAspectRatio:"xMidYMid meet",children:[n.jsx("rect",{x:"60",y:"30",width:"600",height:"290",fill:"#f9fafb",rx:"4"}),l<0&&h>0&&n.jsx("line",{x1:"60",y1:m(0),x2:"660",y2:m(0),stroke:"#10B981",strokeWidth:"2",strokeDasharray:"5,5"}),n.jsx("line",{x1:"60",y1:m(s),x2:"660",y2:m(s),stroke:"#8B5CF6",strokeWidth:"2.5",strokeDasharray:"8,4"}),[0,25,50,75,100].map(f=>{const p=320-f/100*290;return n.jsx("line",{x1:"60",y1:p,x2:"660",y2:p,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"3,3"},f)}),[0,25,50,75,100].map(f=>{const p=l+f/100*(h-l),y=320-f/100*290;return n.jsx("text",{x:"50",y:y+4,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:Math.round(p)},f)}),n.jsx("text",{x:"665",y:m(s)+4,textAnchor:"start",fontSize:"10",fill:"#8B5CF6",fontWeight:"500",children:"TM"}),n.jsx("path",{d:`
              M ${e.map((f,p)=>`${u(p)},${m(f.gross)}`).join(" L ")}
              L ${e.slice().reverse().map((f,p)=>`${u(e.length-1-p)},${m(f.net)}`).join(" L ")}
              Z
            `,fill:"#10B981",opacity:"0.2"}),n.jsx("polyline",{fill:"none",stroke:"#DC2626",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round",points:e.map((f,p)=>`${u(p)},${m(f.gross)}`).join(" ")}),n.jsx("polyline",{fill:"none",stroke:"#10B981",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round",points:e.map((f,p)=>`${u(p)},${m(f.net)}`).join(" ")}),e.map((f,p)=>{const y=u(p);return n.jsxs("g",{children:[n.jsx("rect",{x:y-20,y:"30",width:"40",height:"290",fill:"transparent",className:"cursor-pointer",children:n.jsxs("title",{children:[f.year,": Gross: ",f.gross.toFixed(1),"t TM: ",f.theoreticalMinimum.toFixed(1),"t Above TM: ",f.percentAboveTM.toFixed(0),"% Sequestration: ",f.sequestration.toFixed(1),"t Net: ",f.net.toFixed(1),"t"]})}),n.jsx("circle",{cx:y,cy:m(f.gross),r:"4",fill:"white",stroke:"#DC2626",strokeWidth:"2"}),n.jsx("circle",{cx:y,cy:m(f.net),r:"4",fill:"white",stroke:"#10B981",strokeWidth:"2"}),f.net<=0&&p>0&&e[p-1].net>0&&n.jsxs("g",{children:[n.jsx("circle",{cx:y,cy:m(0),r:"8",fill:"#10B981"}),n.jsx("text",{x:y,y:m(0)+4,textAnchor:"middle",fontSize:"10",fill:"white",fontWeight:"bold",children:"✓"}),n.jsx("text",{x:y,y:m(0)-15,textAnchor:"middle",fontSize:"9",fill:"#10B981",fontWeight:"bold",children:"Net Zero"})]}),f.gross<=f.theoreticalMinimum&&p>0&&e[p-1].gross>e[p-1].theoreticalMinimum&&n.jsxs("g",{children:[n.jsx("circle",{cx:y,cy:m(s),r:"8",fill:"#8B5CF6"}),n.jsx("text",{x:y,y:m(s)+4,textAnchor:"middle",fontSize:"10",fill:"white",fontWeight:"bold",children:"✓"})]})]},p)}),e.filter((f,p)=>p%2===0).map((f,p)=>{const y=u(p*2);return n.jsx("text",{x:y,y:"340",textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:f.year},p)}),n.jsx("text",{x:"20",y:"175",textAnchor:"middle",fontSize:"11",fill:"#374151",fontWeight:"500",transform:"rotate(-90 20 175)",children:"Emissions (t CO₂e/year)"})]}),n.jsxs("div",{className:"flex gap-6 justify-center mt-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("svg",{width:"20",height:"16",children:n.jsx("circle",{cx:"8",cy:"8",r:"4",fill:"white",stroke:"#DC2626",strokeWidth:"2"})}),n.jsx("span",{className:"text-xs text-gray-700",children:"Gross Emissions"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("svg",{width:"20",height:"16",children:n.jsx("line",{x1:"0",y1:"8",x2:"16",y2:"8",stroke:"#8B5CF6",strokeWidth:"2.5",strokeDasharray:"6,2"})}),n.jsx("span",{className:"text-xs text-gray-700",children:"Theoretical Minimum"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("svg",{width:"20",height:"16",children:n.jsx("rect",{x:"0",y:"4",width:"16",height:"8",fill:"#10B981",opacity:"0.2"})}),n.jsx("span",{className:"text-xs text-gray-700",children:"Sequestration"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("svg",{width:"20",height:"16",children:n.jsx("circle",{cx:"8",cy:"8",r:"4",fill:"white",stroke:"#10B981",strokeWidth:"2"})}),n.jsx("span",{className:"text-xs text-gray-700",children:"Net Emissions"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Current Status"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Above TM:"}),n.jsxs("span",{className:"font-semibold",children:[e[0].percentAboveTM.toFixed(0),"%"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Net Emissions:"}),n.jsxs("span",{className:"font-semibold",children:[e[0].net.toFixed(1),"t"]})]})]})]}),n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[n.jsxs("h4",{className:"text-sm font-semibold text-purple-800 mb-2 flex items-center",children:["Theoretical Minimum",n.jsxs("button",{className:"ml-1 text-purple-600 hover:text-purple-800",children:[n.jsx(ot,{size:14}),n.jsx("span",{className:"sr-only",children:"Biological floor information"})]})]}),n.jsxs("div",{className:"text-xs text-purple-700 mb-1",children:["Biological floor: ",s.toFixed(1),"t CO₂e"]}),n.jsx("div",{className:"text-xs text-purple-600",children:i?`Can reach TM by ${e[x].year}`:"Additional measures needed to reach TM"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"text-sm font-semibold text-green-800 mb-2",children:"Carbon Credits"}),n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-green-700",children:"Annual:"}),n.jsxs("span",{className:"font-semibold",children:["£",(r.totalSequestration*25).toFixed(0)]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-green-700",children:"10-Year:"}),n.jsxs("span",{className:"font-semibold",children:["£",(r.totalSequestration*25*10).toFixed(0)]})]})]})]})]})]})},E={feedQuality:.015,methaneInhibitor:.15,manureDigester:.1,precisionFeeding:.08,improvedGenetics:.12,heatAbatement:.05,renewableEnergy:.03,optimizedReproduction:.07},A={feedQuality:50,methaneInhibitor:200,manureDigester:150,precisionFeeding:100,improvedGenetics:80,heatAbatement:60,renewableEnergy:120,optimizedReproduction:40},mr=(e,t=2035)=>{const i=new Date().getFullYear(),r=t-i,a=He(e),o=Ve(a.totalAnnualEmissions,e.herdSize)*1e3,s=Ae(e.herdSize),c=o-s,d=[];let h=0,l=0;if(e.feedQuality<9){const m=9-e.feedQuality,u=o*E.feedQuality*m,x=A.feedQuality*m*e.herdSize;d.push({id:"feed-quality",name:"Improve Feed Quality",description:`Upgrade feed quality from ${e.feedQuality}/10 to 9/10`,potentialReduction:u,cost:x,difficulty:"Easy",timeToImplement:3,category:"Feed"}),h+=u,l+=x}if(!e.methaneInhibitor){const m=o*E.methaneInhibitor,u=A.methaneInhibitor*e.herdSize;d.push({id:"methane-inhibitor",name:"Adopt Methane Inhibitors",description:"Add 3-NOP or similar feed additives to reduce enteric methane",potentialReduction:m,cost:u,difficulty:"Easy",timeToImplement:1,category:"Technology"}),h+=m,l+=u}if(e.manureSystem!=="Anaerobic digester"){const m=o*E.manureDigester,u=A.manureDigester*e.herdSize;d.push({id:"manure-digester",name:"Install Anaerobic Digester",description:"Upgrade manure management to anaerobic digestion with biogas capture",potentialReduction:m,cost:u,difficulty:"Hard",timeToImplement:12,category:"Manure"}),h+=m,l+=u}if(h<c){const m=o*E.precisionFeeding,u=A.precisionFeeding*e.herdSize;d.push({id:"precision-feeding",name:"Implement Precision Feeding",description:"Individual cow feeding optimization with smart feeders",potentialReduction:m,cost:u,difficulty:"Medium",timeToImplement:6,category:"Technology"}),h+=m,l+=u}if(h<c){const m=o*E.improvedGenetics,u=A.improvedGenetics*e.herdSize;d.push({id:"improved-genetics",name:"Accelerate Genetic Progress",description:"Select for low-methane genetics and improved feed efficiency",potentialReduction:m,cost:u,difficulty:"Medium",timeToImplement:24,category:"Management"}),h+=m,l+=u}if(h<c){const m=o*E.heatAbatement,u=A.heatAbatement*e.herdSize;d.push({id:"heat-abatement",name:"Install Heat Abatement",description:"Cooling systems to reduce heat stress and improve efficiency",potentialReduction:m,cost:u,difficulty:"Medium",timeToImplement:3,category:"Technology"}),h+=m,l+=u}if(h<c){const m=o*E.renewableEnergy,u=A.renewableEnergy*e.herdSize;d.push({id:"renewable-energy",name:"Switch to Renewable Energy",description:"Solar panels and renewable energy for farm operations",potentialReduction:m,cost:u,difficulty:"Hard",timeToImplement:6,category:"Technology"}),h+=m,l+=u}if(e.ageFirstCalving>22||e.calvingInterval>380){const m=o*E.optimizedReproduction,u=A.optimizedReproduction*e.herdSize;d.push({id:"optimized-reproduction",name:"Optimize Reproduction",description:"Improve fertility management to reduce heifer overhead",potentialReduction:m,cost:u,difficulty:"Easy",timeToImplement:12,category:"Management"}),h+=m,l+=u}return d.sort((m,u)=>{const x=m.potentialReduction/m.cost;return u.potentialReduction/u.cost-x}),{currentEmissions:o,targetEmissions:s,gap:c,measures:d,totalPotentialReduction:h,totalCost:l,timeToTarget:r,canReachTarget:h>=c*.9}},fr=e=>{const t=new Date().getFullYear(),i=[];let r=0;const a=e.measures.reduce((o,s)=>{const c=t+Math.ceil(s.timeToImplement/12);return o[c]||(o[c]=[]),o[c].push(s),o},{});return Object.keys(a).sort((o,s)=>Number(o)-Number(s)).forEach(o=>{a[Number(o)].forEach(s=>{r+=s.potentialReduction,i.push({year:Number(o),measure:s.name,cumulativeReduction:r,remainingGap:Math.max(0,e.gap-r)})})}),i},xr=(e,t=.04)=>{const i=e.totalCost,r=e.totalPotentialReduction*.02,a=10,o=t/12,s=a*12,c=i*(o*Math.pow(1+o,s))/(Math.pow(1+o,s)-1)*12,d=i/r;let h=-i;for(let l=1;l<=10;l++)h+=r/Math.pow(1+t,l);return{totalInvestment:i,annualPayment:c,paybackPeriod:d,netPresentValue:h}},Te={Feed:"#10b981",Manure:"#8b5cf6",Technology:"#3b82f6",Management:"#f59e0b"},pr=({measures:e,currentEmissions:t,targetEmissions:i})=>{const r=[{name:"Current",value:t,type:"current"}];let a=0;e.forEach(s=>{r.push({name:s.name,value:-s.potentialReduction,base:t-a,type:"reduction",category:s.category}),a+=s.potentialReduction}),r.push({name:"Projected",value:t-a,type:"projected"}),r.push({name:"Target (TM)",value:i,type:"target"});const o=({active:s,payload:c})=>{if(s&&c&&c[0]){const d=c[0].payload;if(d.type==="reduction"){const h=e.find(l=>l.name===d.name);return n.jsxs("div",{className:"bg-white p-3 border rounded shadow-lg",children:[n.jsx("p",{className:"font-semibold",children:d.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Category: ",h==null?void 0:h.category]}),n.jsxs("p",{className:"text-sm",children:["Reduction: ",Math.abs(d.value).toFixed(0)," kg CO₂e/year"]}),n.jsxs("p",{className:"text-sm",children:["Difficulty: ",h==null?void 0:h.difficulty]}),n.jsxs("p",{className:"text-sm",children:["Time: ",h==null?void 0:h.timeToImplement," months"]})]})}return n.jsxs("div",{className:"bg-white p-3 border rounded shadow-lg",children:[n.jsx("p",{className:"font-semibold",children:d.name}),n.jsxs("p",{className:"text-sm",children:["Emissions: ",d.value.toFixed(0)," kg CO₂e/year"]})]})}return null};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Emissions Reduction Pathway"}),n.jsx(lt,{width:"100%",height:400,children:n.jsxs(or,{data:r,margin:{top:20,right:30,left:40,bottom:60},children:[n.jsx(Fe,{strokeDasharray:"3 3"}),n.jsx(ee,{dataKey:"name",angle:-45,textAnchor:"end",height:100,fontSize:12}),n.jsx(te,{label:{value:"Emissions (kg CO₂e/year)",angle:-90,position:"insideLeft"}}),n.jsx(ct,{content:n.jsx(o,{})}),n.jsx(Ee,{dataKey:"value",children:r.map((s,c)=>n.jsx(dt,{fill:s.type==="current"?"#ef4444":s.type==="reduction"?Te[s.category]:s.type==="projected"?"#3b82f6":"#8b5cf6",fillOpacity:s.type==="target"?.5:1},`cell-${c}`))})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-900",children:"Current Emissions"}),n.jsx("p",{className:"text-2xl font-bold text-blue-900",children:t.toFixed(0)}),n.jsx("p",{className:"text-sm text-blue-700",children:"kg CO₂e/year"})]}),n.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-900",children:"Potential Reduction"}),n.jsx("p",{className:"text-2xl font-bold text-green-900",children:e.reduce((s,c)=>s+c.potentialReduction,0).toFixed(0)}),n.jsx("p",{className:"text-sm text-green-700",children:"kg CO₂e/year"})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Reduction Measures by Category"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Te).map(([s,c])=>{const h=e.filter(l=>l.category===s).reduce((l,m)=>l+m.potentialReduction,0);return h===0?null:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:c}}),n.jsxs("span",{className:"text-sm",children:[s,": ",h.toFixed(0)," kg CO₂e"]})]},s)})})]})]})},yr=()=>{const e=ue(s=>s.parameters),t=T.useMemo(()=>mr(e),[e]),i=T.useMemo(()=>fr(t),[t]),r=T.useMemo(()=>xr(t),[t]),a=(t.gap/t.currentEmissions*100).toFixed(1),o=(t.totalPotentialReduction/t.currentEmissions*100).toFixed(1);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-lg ${t.canReachTarget?"bg-green-50":"bg-yellow-50"}`,children:[n.jsx("h3",{className:`font-semibold ${t.canReachTarget?"text-green-900":"text-yellow-900"}`,children:"Target Status"}),n.jsx("p",{className:`text-2xl font-bold ${t.canReachTarget?"text-green-900":"text-yellow-900"}`,children:t.canReachTarget?"Achievable":"Challenging"}),n.jsx("p",{className:`text-sm ${t.canReachTarget?"text-green-700":"text-yellow-700"}`,children:t.canReachTarget?"Theoretical minimum can be reached":"Additional measures needed"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:"Gap to TM"}),n.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[a,"%"]}),n.jsxs("p",{className:"text-sm text-blue-700",children:[t.gap.toFixed(0)," kg CO₂e/year"]})]}),n.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-purple-900",children:"Reduction Potential"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[o,"%"]}),n.jsxs("p",{className:"text-sm text-purple-700",children:[t.measures.length," measures identified"]})]})]}),n.jsx(pr,{measures:t.measures,currentEmissions:t.currentEmissions,targetEmissions:t.targetEmissions}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Implementation Timeline"}),n.jsxs("div",{className:"space-y-2",children:[i.slice(0,5).map((s,c)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-600",children:s.year}),n.jsx("span",{className:"text-sm",children:s.measure})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-semibold",children:["-",(s.cumulativeReduction/t.currentEmissions*100).toFixed(1),"%"]}),n.jsx("p",{className:"text-xs text-gray-600",children:"cumulative"})]})]},c)),i.length>5&&n.jsxs("p",{className:"text-sm text-gray-600 text-center pt-2",children:["+",i.length-5," more measures"]})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Investment Overview"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Investment"}),n.jsxs("p",{className:"text-lg font-semibold",children:["$",r.totalInvestment.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Annual Payment"}),n.jsxs("p",{className:"text-lg font-semibold",children:["$",r.annualPayment.toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Payback Period"}),n.jsxs("p",{className:"text-lg font-semibold",children:[r.paybackPeriod.toFixed(1)," years"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"10-Year NPV"}),n.jsxs("p",{className:`text-lg font-semibold ${r.netPresentValue>0?"text-green-600":"text-red-600"}`,children:["$",r.netPresentValue.toLocaleString()]})]})]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reduction Measures (Ranked by ROI)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Measure"}),n.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Reduction"}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Cost/Year"}),n.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"ROI"}),n.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Difficulty"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.measures.map(s=>{const c=s.potentialReduction*.02/(s.cost/e.herdSize)*100;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 text-sm",children:s.name}),n.jsx("td",{className:"px-4 py-2 text-sm",children:s.category}),n.jsxs("td",{className:"px-4 py-2 text-sm text-right",children:[s.potentialReduction.toFixed(0)," kg CO₂e"]}),n.jsxs("td",{className:"px-4 py-2 text-sm text-right",children:["$",s.cost.toLocaleString()]}),n.jsxs("td",{className:"px-4 py-2 text-sm text-right font-semibold",children:[c.toFixed(0),"%"]}),n.jsx("td",{className:"px-4 py-2 text-sm text-center",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs ${s.difficulty==="Easy"?"bg-green-100 text-green-800":s.difficulty==="Medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.difficulty})})]},s.id)})})]})})]})]})},jr=({state:e,actions:t})=>{const i=e.sequestration.totalSequestration*25;return n.jsxs("div",{className:"p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Carbon Sequestration & Credits"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sequestration Options"}),n.jsx(lr,{})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Annual Sequestration"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Total Sequestration"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[e.sequestration.totalSequestration.toFixed(1)," t CO₂e"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Potential Credit Value"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",i.toFixed(0)]})]})]}),n.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Hedgerows"}),n.jsxs("span",{children:[e.sequestration.hedgerowSequestration.toFixed(1)," t"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Trees"}),n.jsxs("span",{children:[e.sequestration.treeSequestration.toFixed(1)," t"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Soil"}),n.jsxs("span",{children:[e.sequestration.soilCarbonSequestration.toFixed(1)," t"]})]})]})]})})]}),n.jsx("div",{className:"mt-6",children:n.jsx(hr,{})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Reduction Pathway to Theoretical Minimum"}),n.jsx(yr,{})]})]})};export{jr as default};
