import{t as f}from"./carbonFloor-62ea8a2f.js";import{m as y,n as b}from"./index-d6534032.js";const l={feedQuality:.015,methaneInhibitor:.15,manureDigester:.1,precisionFeeding:.08,improvedGenetics:.12,heatAbatement:.05,renewableEnergy:.03,optimizedReproduction:.07},u={feedQuality:50,methaneInhibitor:200,manureDigester:150,precisionFeeding:100,improvedGenetics:80,heatAbatement:60,renewableEnergy:120,optimizedReproduction:40},v=(i,p=2035)=>{const d=new Date().getFullYear(),m=p-d,h=y(i),n=b(h.totalAnnualEmissions,i.herdSize)*1e3,c=f(i.herdSize),a=n-c,s=[];let o=0,r=0;if(i.feedQuality<9){const e=9-i.feedQuality,t=n*l.feedQuality*e,g=u.feedQuality*e*i.herdSize;s.push({id:"feed-quality",name:"Improve Feed Quality",description:`Upgrade feed quality from ${i.feedQuality}/10 to 9/10`,potentialReduction:t,cost:g,difficulty:"Easy",timeToImplement:3,category:"Feed"}),o+=t,r+=g}if(!i.methaneInhibitor){const e=n*l.methaneInhibitor,t=u.methaneInhibitor*i.herdSize;s.push({id:"methane-inhibitor",name:"Adopt Methane Inhibitors",description:"Add 3-NOP or similar feed additives to reduce enteric methane",potentialReduction:e,cost:t,difficulty:"Easy",timeToImplement:1,category:"Technology"}),o+=e,r+=t}if(i.manureSystem!=="Anaerobic digester"){const e=n*l.manureDigester,t=u.manureDigester*i.herdSize;s.push({id:"manure-digester",name:"Install Anaerobic Digester",description:"Upgrade manure management to anaerobic digestion with biogas capture",potentialReduction:e,cost:t,difficulty:"Hard",timeToImplement:12,category:"Manure"}),o+=e,r+=t}if(o<a){const e=n*l.precisionFeeding,t=u.precisionFeeding*i.herdSize;s.push({id:"precision-feeding",name:"Implement Precision Feeding",description:"Individual cow feeding optimization with smart feeders",potentialReduction:e,cost:t,difficulty:"Medium",timeToImplement:6,category:"Technology"}),o+=e,r+=t}if(o<a){const e=n*l.improvedGenetics,t=u.improvedGenetics*i.herdSize;s.push({id:"improved-genetics",name:"Accelerate Genetic Progress",description:"Select for low-methane genetics and improved feed efficiency",potentialReduction:e,cost:t,difficulty:"Medium",timeToImplement:24,category:"Management"}),o+=e,r+=t}if(o<a){const e=n*l.heatAbatement,t=u.heatAbatement*i.herdSize;s.push({id:"heat-abatement",name:"Install Heat Abatement",description:"Cooling systems to reduce heat stress and improve efficiency",potentialReduction:e,cost:t,difficulty:"Medium",timeToImplement:3,category:"Technology"}),o+=e,r+=t}if(o<a){const e=n*l.renewableEnergy,t=u.renewableEnergy*i.herdSize;s.push({id:"renewable-energy",name:"Switch to Renewable Energy",description:"Solar panels and renewable energy for farm operations",potentialReduction:e,cost:t,difficulty:"Hard",timeToImplement:6,category:"Technology"}),o+=e,r+=t}if(i.ageFirstCalving>22||i.calvingInterval>380){const e=n*l.optimizedReproduction,t=u.optimizedReproduction*i.herdSize;s.push({id:"optimized-reproduction",name:"Optimize Reproduction",description:"Improve fertility management to reduce heifer overhead",potentialReduction:e,cost:t,difficulty:"Easy",timeToImplement:12,category:"Management"}),o+=e,r+=t}return s.sort((e,t)=>{const g=e.potentialReduction/e.cost;return t.potentialReduction/t.cost-g}),{currentEmissions:n,targetEmissions:c,gap:a,measures:s,totalPotentialReduction:o,totalCost:r,timeToTarget:m,canReachTarget:o>=a*.9}},E=i=>{const p=new Date().getFullYear(),d=[];let m=0;const h=i.measures.reduce((n,c)=>{const a=p+Math.ceil(c.timeToImplement/12);return n[a]||(n[a]=[]),n[a].push(c),n},{});return Object.keys(h).sort((n,c)=>Number(n)-Number(c)).forEach(n=>{h[Number(n)].forEach(c=>{m+=c.potentialReduction,d.push({year:Number(n),measure:c.name,cumulativeReduction:m,remainingGap:Math.max(0,i.gap-m)})})}),d},S=(i,p=.04)=>{const d=i.totalCost,m=i.totalPotentialReduction*.02,h=10,n=p/12,c=h*12,a=d*(n*Math.pow(1+n,c))/(Math.pow(1+n,c)-1)*12,s=d/m;let o=-d;for(let r=1;r<=10;r++)o+=m/Math.pow(1+p,r);return{totalInvestment:d,annualPayment:a,paybackPeriod:s,netPresentValue:o}};export{E as a,S as b,v as c};
