const d=[{id:"green-loan",name:"Green Agriculture Loan",description:"Low-interest loan for environmental improvements",type:"loan",maxAmount:1e6,interestRate:.035,term:10,requirements:["Environmental impact assessment","Emissions reduction plan"],greenDiscount:.015},{id:"equipment-finance",name:"Sustainable Equipment Finance",description:"Asset finance for green technology",type:"loan",maxAmount:5e5,interestRate:.045,term:7,requirements:["Equipment must reduce emissions by >10%"],greenDiscount:.01},{id:"govt-grant",name:"Government Sustainability Grant",description:"Non-repayable grant for proven technologies",type:"grant",maxAmount:1e5,interestRate:0,term:0,requirements:["Must implement methane reduction","Monitoring required"],greenDiscount:0},{id:"carbon-advance",name:"Carbon Credit Advance",description:"Upfront payment against future carbon credits",type:"carbon-credit",maxAmount:2e5,interestRate:.06,term:5,requirements:["Verified baseline emissions","Credit generation plan"],greenDiscount:0},{id:"blended-finance",name:"Blended Finance Package",description:"Combined loan and grant funding",type:"blended",maxAmount:75e4,interestRate:.025,term:8,requirements:["Large-scale project","Multiple environmental benefits"],greenDiscount:.02}],P=(e,a=700,t=0)=>{const n=e.totalCost,o=[],c=[...e.measures].sort((r,i)=>{const l=r.potentialReduction/r.cost;return i.potentialReduction/i.cost-l});let s=n;for(const r of c){if(s<=0)break;const i=M(r);if(i){const l=Math.min(r.cost,i.maxAmount,s),b=i.interestRate-i.greenDiscount,C={option:i,amount:l,monthlyCost:h(l,b,i.term),totalCost:x(l,b,i.term),carbonBenefit:r.potentialReduction*l/r.cost};o.push(C),s-=l}}const g=o.reduce((r,i)=>r+i.monthlyCost,0),f=o.reduce((r,i)=>r+i.totalCost,0),u=o.reduce((r,i)=>r+i.carbonBenefit,0),m=u*.025,y=f/(m*12),v=A(n,m,10,.05),p=R(n,m,10);return{totalInvestment:n,financingOptions:o,totalMonthlyCost:g,totalFinancingCost:f,paybackPeriod:y,netPresentValue:v,internalRateOfReturn:p,carbonCostEffectiveness:f/u}},M=(e,a)=>e.id==="methane-inhibitor"?d.find(t=>t.id==="govt-grant")||null:e.category==="Technology"&&e.cost>5e4?d.find(t=>t.id==="equipment-finance")||null:e.difficulty==="Easy"&&e.timeToImplement<=6?d.find(t=>t.id==="carbon-advance")||null:e.cost>2e5?d.find(t=>t.id==="blended-finance")||null:d.find(t=>t.id==="green-loan")||null,h=(e,a,t)=>{if(a===0||t===0)return 0;const n=a/12,o=t*12;return e*(n*Math.pow(1+n,o))/(Math.pow(1+n,o)-1)},x=(e,a,t)=>a===0||t===0?0:h(e,a,t)*t*12,A=(e,a,t,n)=>{let o=-e;for(let c=1;c<=t;c++)o+=a/Math.pow(1+n,c);return o},R=(e,a,t)=>{let n=0,o=0;for(let c=0;c<=1;c+=.001){o=-e;for(let s=1;s<=t;s++)o+=a/Math.pow(1+c,s);if(o>0)n=c;else break}return n},q=(e,a,t,n)=>{const o=e*.3,c=a*.1,s=o-c,g=n>20?.02:n>10?.01:0,f=d.filter(p=>{if(p.type==="grant")return!0;const r=p.type==="loan"?650:700;return t>=r}),u=.04,m=8;return{maxLoanAmount:s/12*(Math.pow(1+u/12,m*12)-1)/(u/12*Math.pow(1+u/12,m*12)),eligibleOptions:f,debtServiceRatio:c/e,greenBonus:g}};export{q as a,P as c};
