import{b as f,r as g,j as e}from"./index-d6534032.js";import{c as v}from"./reductionPathway-e8d6cb38.js";import"./carbonFloor-62ea8a2f.js";const b=[{id:"green-loan",name:"Green Agriculture Loan",description:"Low-interest loan for environmental improvements",type:"loan",maxAmount:1e6,interestRate:.035,term:10,requirements:["Environmental impact assessment","Emissions reduction plan"],greenDiscount:.015},{id:"equipment-finance",name:"Sustainable Equipment Finance",description:"Asset finance for green technology",type:"loan",maxAmount:5e5,interestRate:.045,term:7,requirements:["Equipment must reduce emissions by >10%"],greenDiscount:.01},{id:"govt-grant",name:"Government Sustainability Grant",description:"Non-repayable grant for proven technologies",type:"grant",maxAmount:1e5,interestRate:0,term:0,requirements:["Must implement methane reduction","Monitoring required"],greenDiscount:0},{id:"carbon-advance",name:"Carbon Credit Advance",description:"Upfront payment against future carbon credits",type:"carbon-credit",maxAmount:2e5,interestRate:.06,term:5,requirements:["Verified baseline emissions","Credit generation plan"],greenDiscount:0},{id:"blended-finance",name:"Blended Finance Package",description:"Combined loan and grant funding",type:"blended",maxAmount:75e4,interestRate:.025,term:8,requirements:["Large-scale project","Multiple environmental benefits"],greenDiscount:.02}],C=(a,r=700,s=0)=>{const n=a.totalCost,i=[],l=[...a.measures].sort((x,c)=>{const u=x.potentialReduction/x.cost;return c.potentialReduction/c.cost-u});let o=n;for(const x of l){if(o<=0)break;const c=F(x);if(c){const u=Math.min(x.cost,c.maxAmount,o),y=c.interestRate-c.greenDiscount,w={option:c,amount:u,monthlyCost:R(u,y,c.term),totalCost:M(u,y,c.term),carbonBenefit:x.potentialReduction*u/x.cost};i.push(w),o-=u}}const d=i.reduce((x,c)=>x+c.monthlyCost,0),m=i.reduce((x,c)=>x+c.totalCost,0),p=i.reduce((x,c)=>x+c.carbonBenefit,0),t=p*.025,h=m/(t*12),j=P(n,t,10,.05),N=A(n,t,10);return{totalInvestment:n,financingOptions:i,totalMonthlyCost:d,totalFinancingCost:m,paybackPeriod:h,netPresentValue:j,internalRateOfReturn:N,carbonCostEffectiveness:m/p}},F=(a,r)=>a.id==="methane-inhibitor"?b.find(s=>s.id==="govt-grant")||null:a.category==="Technology"&&a.cost>5e4?b.find(s=>s.id==="equipment-finance")||null:a.difficulty==="Easy"&&a.timeToImplement<=6?b.find(s=>s.id==="carbon-advance")||null:a.cost>2e5?b.find(s=>s.id==="blended-finance")||null:b.find(s=>s.id==="green-loan")||null,R=(a,r,s)=>{if(r===0||s===0)return 0;const n=r/12,i=s*12;return a*(n*Math.pow(1+n,i))/(Math.pow(1+n,i)-1)},M=(a,r,s)=>r===0||s===0?0:R(a,r,s)*s*12,P=(a,r,s,n)=>{let i=-a;for(let l=1;l<=s;l++)i+=r/Math.pow(1+n,l);return i},A=(a,r,s)=>{let n=0,i=0;for(let l=0;l<=1;l+=.001){i=-a;for(let o=1;o<=s;o++)i+=r/Math.pow(1+l,o);if(i>0)n=l;else break}return n},S=(a,r,s,n)=>{const i=a*.3,l=r*.1,o=i-l,d=n>20?.02:n>10?.01:0,m=b.filter(N=>{if(N.type==="grant")return!0;const x=N.type==="loan"?650:700;return s>=x}),p=.04,t=8;return{maxLoanAmount:o/12*(Math.pow(1+p/12,t*12)-1)/(p/12*Math.pow(1+p/12,t*12)),eligibleOptions:m,debtServiceRatio:l/a,greenBonus:d}},D=({pathway:a})=>{const r=f(t=>t.parameters),s=f(t=>t.loanAmount),n=g.useMemo(()=>a||v(r),[a,r]),i=g.useMemo(()=>r.milkYield*r.herdSize*.35,[r.milkYield,r.herdSize]),l=g.useMemo(()=>n.totalPotentialReduction/n.currentEmissions*100,[n]),o=g.useMemo(()=>S(i,s,720,l),[i,s,l]),d=g.useMemo(()=>C(n,720,s),[n,s]),m=t=>`$${t.toLocaleString()}`,p=t=>`${(t*100).toFixed(1)}%`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Financing Eligibility"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Max Loan Amount"}),e.jsx("p",{className:"text-xl font-bold text-green-900",children:m(o.maxLoanAmount)})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Annual Revenue"}),e.jsx("p",{className:"text-xl font-bold text-blue-900",children:m(i)})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Debt Service Ratio"}),e.jsx("p",{className:"text-xl font-bold text-purple-900",children:p(o.debtServiceRatio)})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Green Bonus Rate"}),e.jsx("p",{className:"text-xl font-bold text-yellow-900",children:p(o.greenBonus)})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recommended Financing Package"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:m(d.totalInvestment)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Investment Needed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:m(d.totalMonthlyCost)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Payment"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[d.paybackPeriod.toFixed(1)," years"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Payback Period"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Financing Cost"}),e.jsx("p",{className:"font-semibold",children:m(d.totalFinancingCost)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Present Value"}),e.jsx("p",{className:`font-semibold ${d.netPresentValue>0?"text-green-600":"text-red-600"}`,children:m(d.netPresentValue)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Internal Rate of Return"}),e.jsx("p",{className:"font-semibold",children:p(d.internalRateOfReturn)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Carbon Cost Effectiveness"}),e.jsxs("p",{className:"font-semibold",children:["$",d.carbonCostEffectiveness.toFixed(2),"/kg CO₂e"]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Financing Sources"}),e.jsx("div",{className:"space-y-4",children:d.financingOptions.map((t,h)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.option.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.option.description})]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded ${t.option.type==="grant"?"bg-green-100 text-green-800":t.option.type==="loan"?"bg-blue-100 text-blue-800":t.option.type==="carbon-credit"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:t.option.type})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsx("span",{className:"ml-1 font-semibold",children:m(t.amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Monthly:"}),e.jsx("span",{className:"ml-1 font-semibold",children:m(t.monthlyCost)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Rate:"}),e.jsx("span",{className:"ml-1 font-semibold",children:p(t.option.interestRate-t.option.greenDiscount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Term:"}),e.jsxs("span",{className:"ml-1 font-semibold",children:[t.option.term," years"]})]})]}),e.jsx("div",{className:"mt-2 text-sm text-gray-600",children:e.jsxs("span",{className:"text-green-600 font-semibold",children:[t.carbonBenefit.toFixed(0)," kg CO₂e reduction funded"]})})]},h))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"All Available Green Financing Options"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.eligibleOptions.map(t=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),e.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Max Amount:"}),e.jsx("span",{className:"font-semibold",children:m(t.maxAmount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Interest Rate:"}),e.jsx("span",{className:"font-semibold",children:p(t.interestRate)})]}),t.greenDiscount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Green Discount:"}),e.jsxs("span",{className:"font-semibold",children:["-",p(t.greenDiscount)]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"Requirements:"}),e.jsx("ul",{className:"text-xs text-gray-600 mt-1",children:t.requirements.map((h,j)=>e.jsxs("li",{className:"ml-2",children:["• ",h]},j))})]})]},t.id))})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Ready to Get Started?"}),e.jsxs("p",{className:"text-green-800 mb-4",children:["Your farm qualifies for multiple green financing options that can help you achieve a ",l.toFixed(1),"% reduction in emissions while improving profitability."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700",children:"Download Financing Report"}),e.jsx("button",{className:"bg-white text-green-600 border border-green-600 px-6 py-2 rounded hover:bg-green-50",children:"Schedule Consultation"})]})]})]})},O=({state:a,actions:r})=>{const s=f(d=>d.parameters),n=g.useMemo(()=>v(s),[s]),i=n.totalCost,l=n.totalPotentialReduction/n.currentEmissions*100,o=i/(n.totalPotentialReduction*25);return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Green Financing Options"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total Investment"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",i.toLocaleString()]}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"For all measures"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Emissions Reduction"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"From current levels"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Simple Payback"}),e.jsxs("p",{className:"text-2xl font-bold",children:[o.toFixed(1)," years"]}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"From carbon credits"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Available Measures"}),e.jsx("p",{className:"text-2xl font-bold",children:n.measures.length}),e.jsx("p",{className:"text-xs opacity-80 mt-1",children:"Reduction options"})]})]}),e.jsx(D,{pathway:n})]})};export{O as default};
