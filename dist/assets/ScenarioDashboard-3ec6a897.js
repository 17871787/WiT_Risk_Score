import{c as m,b as p,u as h,j as e,r as y,T as u}from"./index-d6534032.js";import{L as d}from"./leaf-6580ae76.js";import{T as x}from"./trending-down-bee8a929.js";const b=m("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),g=m("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),f=m("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),j=m("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),v=m("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),N=()=>{const i=p(),{parameters:t,updateParameter:n}=i;h();const o=[{id:"extend-grazing",name:"Extend Grazing Period",description:"Add 1 month to grazing season",icon:e.jsx(b,{className:"w-5 h-5"}),apply:()=>n("grazingMonths",Math.min(12,t.grazingMonths+1)),revert:()=>n("grazingMonths",Math.max(0,t.grazingMonths-1)),isApplied:()=>t.grazingMonths>7,impact:"-3% emissions"},{id:"solar-panels",name:"Install Solar Panels",description:"Add 50 kW renewable capacity",icon:e.jsx(v,{className:"w-5 h-5"}),apply:()=>n("renewableEnergyKw",t.renewableEnergyKw+50),revert:()=>n("renewableEnergyKw",Math.max(0,t.renewableEnergyKw-50)),isApplied:()=>t.renewableEnergyKw>0,impact:"-20 t CO₂e/year"},{id:"methane-inhibitor",name:"Methane Inhibitor Feed",description:"Add feed additives to reduce enteric emissions",icon:e.jsx(f,{className:"w-5 h-5"}),apply:()=>n("methaneInhibitor",!0),revert:()=>n("methaneInhibitor",!1),isApplied:()=>t.methaneInhibitor,impact:"-15% enteric"},{id:"improved-manure",name:"Upgrade Manure System",description:"Implement covered storage and treatment",icon:e.jsx(d,{className:"w-5 h-5"}),apply:()=>n("improvedManure",!0),revert:()=>n("improvedManure",!1),isApplied:()=>t.improvedManure,impact:"-30% manure"},{id:"tree-planting",name:"Plant Trees",description:"Add 5 hectares of woodland",icon:e.jsx(d,{className:"w-5 h-5"}),apply:()=>n("treePlantingHa",t.treePlantingHa+5),revert:()=>n("treePlantingHa",Math.max(0,t.treePlantingHa-5)),isApplied:()=>t.treePlantingHa>0,impact:"+60 t CO₂e/year seq"},{id:"reduce-nitrogen",name:"Optimize Nitrogen Use",description:"Reduce application by 20 kg/ha",icon:e.jsx(g,{className:"w-5 h-5"}),apply:()=>n("nitrogenRate",Math.max(100,t.nitrogenRate-20)),revert:()=>n("nitrogenRate",t.nitrogenRate+20),isApplied:()=>t.nitrogenRate<180,impact:"-5% N₂O"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Quick Scenario Builder"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Toggle practices below to see their impact on your emissions and costs. Each change updates calculations in real-time."})]}),e.jsx("div",{className:"space-y-3",children:o.map(a=>e.jsx("div",{className:`
              border rounded-lg p-4 transition-all cursor-pointer
              ${a.isApplied()?"bg-green-50 border-green-300":"bg-white border-gray-200 hover:border-gray-300"}
            `,onClick:()=>a.isApplied()?a.revert():a.apply(),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`
                  p-2 rounded-lg
                  ${a.isApplied()?"bg-green-200 text-green-700":"bg-gray-100 text-gray-600"}
                `,children:a.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description}),e.jsx("div",{className:"flex items-center mt-2 space-x-4",children:e.jsx("span",{className:"text-xs font-medium text-green-600",children:a.impact})})]})]}),e.jsx("button",{className:`
                  px-3 py-1 rounded-md text-sm font-medium transition-colors
                  ${a.isApplied()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
                `,onClick:c=>{c.stopPropagation(),a.isApplied()?a.revert():a.apply()},children:a.isApplied()?"Active":"Apply"})]})},a.id))}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Active Practices Summary"}),e.jsxs("div",{className:"space-y-1",children:[o.filter(a=>a.isApplied()).map(a=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(j,{className:"w-4 h-4 text-green-600 mr-2"}),a.name]},a.id)),o.filter(a=>a.isApplied()).length===0&&e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No practices applied yet. Click on any practice above to see its impact."})]})]})]})},M=()=>{const i=h();p();const t=y.useMemo(()=>({grossEmissions:1234,sequestration:50,netEmissions:1184,emissionsIntensity:1.45,costPerLitre:.31,annualProfit:125e3,lme:7500}),[]),n=[{label:"Gross Emissions",baseline:t.grossEmissions,scenario:i.totalFarmEmissions,unit:"t CO₂e/year",format:s=>s.toFixed(0),inverse:!0},{label:"Sequestration",baseline:t.sequestration,scenario:i.sequestration.totalSequestration,unit:"t CO₂e/year",format:s=>s.toFixed(0),inverse:!1},{label:"Net Emissions",baseline:t.netEmissions,scenario:i.netFarmEmissions,unit:"t CO₂e/year",format:s=>s.toFixed(0),inverse:!0},{label:"Emissions Intensity",baseline:t.emissionsIntensity,scenario:i.emissionsIntensity,unit:"kg CO₂e/L",format:s=>s.toFixed(2),inverse:!0},{label:"Cost per Litre",baseline:t.costPerLitre,scenario:i.costPerLitre,unit:"£/L",format:s=>s.toFixed(3),inverse:!0},{label:"Annual Profit",baseline:t.annualProfit,scenario:i.totalFarmProfit,unit:"£",format:s=>`£${(s/1e3).toFixed(0)}k`,inverse:!1},{label:"Lifetime Methane Efficiency",baseline:t.lme,scenario:i.lmeResult.lme,unit:"L/t CO₂e",format:s=>s.toFixed(0),inverse:!1}],o=(s,r)=>Math.abs(s)<.01?e.jsx(g,{className:"w-4 h-4 text-gray-400"}):(r?s<0:s>0)?e.jsx(x,{className:"w-4 h-4 text-green-600"}):e.jsx(u,{className:"w-4 h-4 text-red-600"}),a=(s,r)=>Math.abs(s)<.01?"text-gray-600":(r?s<0:s>0)?"text-green-600":"text-red-600",c=(s,r)=>{const l=(r-s)/s*100;return`${l>0?"+":""}${l.toFixed(1)}%`};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Scenario Comparison"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 pr-4 text-sm font-medium text-gray-700",children:"Metric"}),e.jsx("th",{className:"text-right px-4 py-2 text-sm font-medium text-gray-700",children:"Baseline"}),e.jsx("th",{className:"text-right px-4 py-2 text-sm font-medium text-gray-700",children:"Scenario"}),e.jsx("th",{className:"text-center px-4 py-2 text-sm font-medium text-gray-700",children:"Change"})]})}),e.jsx("tbody",{children:n.map(s=>{const r=s.scenario-s.baseline,l=c(s.baseline,s.scenario);return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 pr-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.label}),e.jsx("div",{className:"text-xs text-gray-500",children:s.unit})]})}),e.jsx("td",{className:"text-right px-4 py-3 text-gray-700",children:s.format(s.baseline)}),e.jsx("td",{className:"text-right px-4 py-3 font-medium text-gray-900",children:s.format(s.scenario)}),e.jsx("td",{className:"text-center px-4 py-3",children:e.jsxs("div",{className:`flex items-center justify-center space-x-1 ${a(r,s.inverse||!1)}`,children:[o(r,s.inverse||!1),e.jsx("span",{className:"font-medium text-sm",children:l})]})})]},s.label)})})]})}),e.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(x,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Overall Impact"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Net emissions reduced by ",Math.round((t.netEmissions-i.netFarmEmissions)/t.netEmissions*100),"%",i.totalFarmProfit>t.annualProfit&&` while increasing profit by £${((i.totalFarmProfit-t.annualProfit)/1e3).toFixed(0)}k`]})]})]})})]})},C=({state:i,actions:t})=>e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Scenario Planning & What-If Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(N,{})}),e.jsx("div",{children:e.jsx(M,{})})]})]});export{C as default};
