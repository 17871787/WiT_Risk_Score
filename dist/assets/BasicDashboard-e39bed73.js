import{u as e,j as s,P as t,t as a,p as i,g as l,a as n,b as r,c as o,d as c,e as d,R as m}from"./index-294fea26.js";import{R as x,P as g,a as u,C as h,T as j}from"./chart-vendor-6d7d213e.js";import{T as b,c as f,a as p,L as N,I as y,P as v}from"./ui-vendor-fd39ecb8.js";import{r as C}from"./react-vendor-3e9c946d.js";import{S as F}from"./Slider-03b4b334.js";import"./state-15ddd646.js";const E=["#3B82F6","#10B981","#F59E0B","#8B5CF6"],w=()=>{const{costBreakdown:t,totalAnnualCost:a}=e(),i=t.map((e,s)=>({name:e.name,value:e.value,amount:e.amount,color:E[s]})),l=({active:e,payload:t})=>e&&t&&t.length?s.jsxs("div",{className:"bg-white p-2 shadow-lg rounded border border-gray-200",children:[s.jsx("p",{className:"text-sm font-semibold",children:t[0].name}),s.jsxs("p",{className:"text-sm",children:["£",t[0].payload.amount.toFixed(0)," (",t[0].value,"%)"]})]}):null;return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Cost Breakdown (£/cow/year)"}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"w-48 h-48 relative mr-6",children:[s.jsx(x,{width:"100%",height:"100%",children:s.jsxs(g,{children:[s.jsx(u,{data:i,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",isAnimationActive:!0,animationDuration:1500,children:i.map((e,t)=>s.jsx(h,{fill:e.color},`cell-${t}`))}),s.jsx(j,{content:s.jsx(l,{})})]})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Total Cost"}),s.jsxs("div",{className:"text-xl font-bold",children:["£",a.toFixed(0)]})]})})]}),s.jsx("div",{className:"flex-1 space-y-2",children:i.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),s.jsx("span",{className:"text-sm text-gray-700",children:e.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["£",e.amount.toFixed(0)]}),s.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.value,"%)"]})]})]},t))})]})]})},T=({title:e,value:t,unit:a="",subtitle:i,icon:l,iconColor:n="text-gray-600",valueColor:r="text-gray-900",bgColor:o="bg-gray-50"})=>s.jsxs("div",{className:`${o} p-4 rounded-lg`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-sm text-gray-600",children:e}),l&&s.jsx(l,{className:n,size:16})]}),s.jsxs("div",{className:`text-xl font-bold ${r}`,children:[t,a&&s.jsx("span",{className:"text-sm font-normal ml-1",children:a})]}),i&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i})]}),I=()=>{const{performanceMetrics:a,emissions:i}=e();return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Performance Metrics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(T,{title:"Emissions",value:a.emissions.toFixed(2),unit:"kg CO₂e/L",icon:a.emissions>t.EMISSIONS_TARGET?b:f,iconColor:a.emissions>t.EMISSIONS_TARGET?"text-red-500":"text-green-500",valueColor:a.emissions>t.EMISSIONS_TARGET?"text-red-600":"text-green-600",bgColor:"bg-gray-50"}),s.jsx(T,{title:"Feed Efficiency",value:a.feedEfficiency.toFixed(2),unit:"L/kg",icon:p,iconColor:a.feedEfficiency>=t.FEED_EFFICIENCY_TARGET?"text-green-500":"text-blue-500",valueColor:a.feedEfficiency>=t.FEED_EFFICIENCY_TARGET?"text-green-600":"text-blue-600",bgColor:"bg-gray-50"}),s.jsx(T,{title:"Protein Efficiency",value:a.proteinEfficiency.toFixed(1),unit:"%",icon:N,iconColor:a.proteinEfficiency>=t.PROTEIN_EFFICIENCY_TARGET?"text-green-500":"text-yellow-500",valueColor:a.proteinEfficiency>=t.PROTEIN_EFFICIENCY_TARGET?"text-green-600":"text-yellow-600",bgColor:"bg-gray-50"}),s.jsx(T,{title:"N Efficiency",value:a.nitrogenEfficiency.toFixed(1),unit:"%",icon:N,iconColor:a.nitrogenEfficiency>=t.NITROGEN_EFFICIENCY_TARGET?"text-green-500":"text-yellow-500",valueColor:a.nitrogenEfficiency>=t.NITROGEN_EFFICIENCY_TARGET?"text-green-600":"text-yellow-600",bgColor:"bg-gray-50"})]})]})},R=()=>{const{parameters:t,totalFarmEmissions:n,netFarmEmissions:r,totalFarmProduction:o,totalFarmProfit:c,sequestration:d,emissionsIntensity:m}=e(),x=a(t.herdSize)/1e3,g=i(n,t.herdSize),u=l(g);return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[s.jsx(p,{className:"mr-2",size:18}),"Total Farm Impact (",t.herdSize," cows)"]}),s.jsxs("div",{className:`${u.color.replace("text-","bg-").replace("700","50")} rounded-lg p-3 mb-4`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(y,{size:16,className:u.color}),s.jsxs("span",{className:`text-sm font-medium ${u.color}`,children:[g.toFixed(0),"% above Theoretical Minimum"]})]}),s.jsx("span",{className:`text-xs ${u.color}`,children:u.category})]}),s.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["Biological floor: ",x.toFixed(0),"t CO₂e/year • Gap: ",(n-x).toFixed(0),"t"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(T,{title:"Gross Emissions",value:n.toFixed(0),unit:"t CO₂e/year",subtitle:`${(n/t.herdSize).toFixed(1)} t/cow`,bgColor:"bg-red-50",valueColor:"text-red-600"}),s.jsx(T,{title:"Net Emissions",value:r.toFixed(0),unit:"t CO₂e/year",subtitle:`${d.totalSequestration.toFixed(0)} t sequestered`,bgColor:"bg-green-50",valueColor:r>0?"text-orange-600":"text-green-600"}),s.jsx(T,{title:"Total Production",value:o.toFixed(0),unit:"k L/year",subtitle:`${t.milkYield.toLocaleString()} L/cow`,bgColor:"bg-blue-50",valueColor:"text-blue-600"}),s.jsx(T,{title:"Est. Annual Profit",value:`£${(c/1e3).toFixed(0)}k`,subtitle:`£${(c/t.herdSize).toFixed(0)}/cow`,bgColor:"bg-yellow-50",valueColor:c>0?"text-green-600":"text-red-600"})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t text-sm text-gray-600 flex justify-between",children:[s.jsxs("span",{children:["Carbon intensity: ",s.jsxs("strong",{children:[m.toFixed(2)," kg CO₂e/L"]})]}),s.jsxs("span",{children:["Net intensity: ",s.jsxs("strong",{children:[(r/o).toFixed(3)," kg CO₂e/L"]})]})]})]})},S=()=>{const{emissionsIntensity:t}=e(),{loanAmount:a,loanTerm:i,updateLoanParameter:l}=n(),x=C.useMemo(()=>r(t,a),[t,a]),g=C.useMemo(()=>o(x,a),[x,a]),u=C.useMemo(()=>c(a,g,i),[a,g,i]),h=C.useMemo(()=>d(u,i),[u,i]);return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Financing Options"}),s.jsxs("div",{className:"mb-4 space-y-1",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Risk Score:"}),s.jsx(m,{score:x})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Loan tier: ",a<1e6?"< £1m":a<5e6?"£1-5m":"> £5m"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"loan-amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount (£)"}),s.jsx("input",{id:"loan-amount",name:"loan-amount",type:"number",value:a,onChange:e=>l("loanAmount",Number(e.target.value)),step:5e4,min:1e5,max:1e7,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx(F,{label:"Term (years)",value:i,onChange:e=>l("loanTerm",e),min:1,max:25,step:1,decimals:0,showValue:!0})]}),s.jsxs("div",{className:"mt-6 space-y-3 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Interest Rate:"}),s.jsxs("span",{className:"text-sm font-semibold",children:[(100*g).toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Monthly Repayment:"}),s.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["£",u.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Repaid:"}),s.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["£",h.toLocaleString("en-GB",{maximumFractionDigits:0})]})]})]}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsxs("a",{href:`mailto:relationship.manager@bank.com?subject=GHG%20Loan%20Inquiry%20-%20Risk%20Score%3A%20${x}`,className:"w-full text-center bg-indigo-600 text-white px-4 py-3 rounded-md hover:bg-indigo-700 transition-colors flex items-center justify-center",children:[s.jsx(v,{className:"mr-2",size:18}),"Click here to speak to your Relationship Manager"]})})]})},k=()=>{const{parameters:e,updateParameter:t}=n();return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Feed Parameters"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(F,{label:"Feed Quality",value:e.feedQuality,onChange:e=>t("feedQuality",e),min:1,max:10,step:1,unit:"",decimals:0,info:"Higher quality feed improves efficiency"}),s.jsx(F,{label:"Concentrate Feed",value:e.concentrateFeed,onChange:e=>t("concentrateFeed",e),min:0,max:12,step:.5,unit:" kg/day",decimals:1}),s.jsx(F,{label:"Feed Carbon Footprint",value:e.feedCarbonFootprint,onChange:e=>t("feedCarbonFootprint",e),min:.3,max:2,step:.1,unit:" kg CO₂e/kg",decimals:1})]})]})},A=({state:e,actions:t})=>s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx("div",{className:"col-span-1 lg:col-span-2",children:s.jsx(S,{})}),s.jsx("div",{className:"col-span-1 lg:col-span-2",children:s.jsx(k,{})}),s.jsx(w,{}),s.jsx(I,{}),s.jsx("div",{className:"col-span-1 lg:col-span-2",children:s.jsx(R,{})})]})});export{A as default};
