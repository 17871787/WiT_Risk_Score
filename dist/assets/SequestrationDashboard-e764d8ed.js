import{c as S,d as w,u as v,j as e,r as q}from"./index-dc5856fd.js";import{S as x}from"./Slider-3502a22c.js";const k=S("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),E=()=>{const{parameters:n,updateParameter:r}=w(),{sequestration:a}=v();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:"Carbon Sequestration Activities"}),e.jsx("p",{className:"text-xs text-green-700",children:"Add nature-based and technology solutions to offset your farm's emissions."})]}),e.jsx(x,{label:"Tree Planting (hectares)",value:n.treePlantingHa,onChange:t=>r("treePlantingHa",t),min:0,max:50,step:1,unit:" ha",decimals:0,info:n.treePlantingHa>0?`↓ ${a.treeSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(x,{label:"Hedgerow Planting (km)",value:n.hedgerowKm,onChange:t=>r("hedgerowKm",t),min:0,max:20,step:.5,unit:" km",decimals:1,info:n.hedgerowKm>0?`↓ ${a.hedgerowSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(x,{label:"Soil Carbon Management (ha)",value:n.soilCarbonHa,onChange:t=>r("soilCarbonHa",t),min:0,max:100,step:5,unit:" ha",decimals:0,info:n.soilCarbonHa>0?`↓ ${a.soilCarbonSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(x,{label:"Cover Crops (hectares)",value:n.coverCropsHa,onChange:t=>r("coverCropsHa",t),min:0,max:80,step:5,unit:" ha",decimals:0,info:n.coverCropsHa>0?`↓ ${a.coverCropSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(x,{label:"Renewable Energy (kW)",value:n.renewableEnergyKw,onChange:t=>r("renewableEnergyKw",t),min:0,max:200,step:10,unit:" kW",decimals:0,info:n.renewableEnergyKw>0?`↓ ${a.renewableOffset.toFixed(1)} t CO₂e/year`:void 0}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{htmlFor:"methane-inhibitor-checkbox",className:"flex items-center text-sm",children:[e.jsx("input",{id:"methane-inhibitor-checkbox",name:"methane-inhibitor-checkbox",type:"checkbox",checked:n.methaneInhibitor,onChange:t=>r("methaneInhibitor",t.target.checked),className:"mr-2"}),e.jsx("span",{className:"font-medium",children:"Methane Inhibitor Feed Additive"})]}),n.methaneInhibitor&&e.jsxs("div",{className:"text-xs text-green-600 ml-6",children:["↓ ",a.methaneReduction.toFixed(1)," t CO₂e/year (15% reduction)"]}),e.jsxs("label",{htmlFor:"improved-manure-checkbox",className:"flex items-center text-sm",children:[e.jsx("input",{id:"improved-manure-checkbox",name:"improved-manure-checkbox",type:"checkbox",checked:n.improvedManure,onChange:t=>r("improvedManure",t.target.checked),className:"mr-2"}),e.jsx("span",{className:"font-medium",children:"Improved Manure Management"})]}),n.improvedManure&&e.jsxs("div",{className:"text-xs text-green-600 ml-6",children:["↓ ",a.improvedManureReduction.toFixed(1)," t CO₂e/year (30% reduction)"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Sequestration Summary"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Nature-based Solutions:"}),e.jsxs("span",{className:"font-semibold text-blue-800",children:[(a.treeSequestration+a.hedgerowSequestration+a.soilCarbonSequestration+a.coverCropSequestration).toFixed(1)," t CO₂e"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Technology Solutions:"}),e.jsxs("span",{className:"font-semibold text-blue-800",children:[(a.renewableOffset+a.methaneReduction+a.improvedManureReduction).toFixed(1)," t CO₂e"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-1 mt-1",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Total Sequestration:"}),e.jsxs("span",{className:"font-bold text-blue-900",children:[a.totalSequestration.toFixed(1)," t CO₂e/year"]})]})]})]})]})},F=()=>{const{totalFarmEmissions:n,sequestration:r,totalFarmProduction:a}=v(),t=q.useMemo(()=>{const s=[];for(let i=0;i<=10;i++){const o=1+i*.01,N=1-i*.02,C=i===0?0:Math.min(i*.15,1),p=n*N,b=r.totalSequestration*C,f=p-b;s.push({year:2025+i,grossEmissions:p,sequestration:b,netEmissions:f,production:a*o,intensity:f/(a*o)})}return s},[n,r.totalSequestration,a]),h=Math.max(...t.map(s=>s.grossEmissions)),u=Math.min(...t.map(s=>s.netEmissions)),j=(h-u)*.1,m=h+j,d=Math.min(0,u-j),l=s=>320-(s-d)/(m-d)*280,c=s=>60+s/(t.length-1)*600,g=t.findIndex(s=>s.netEmissions<=0),y=g===-1?Math.ceil(t[0].netEmissions/(r.totalSequestration/10)):g;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(k,{className:"mr-2 text-green-600",size:20}),"10-Year Net Carbon Glide Path"]}),e.jsxs("div",{className:"relative",style:{height:"400px"},children:[e.jsxs("svg",{width:"100%",height:"360",viewBox:"0 0 700 360",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("rect",{x:"60",y:"30",width:"600",height:"290",fill:"#f9fafb",rx:"4"}),d<0&&m>0&&e.jsx("line",{x1:"60",y1:l(0),x2:"660",y2:l(0),stroke:"#10B981",strokeWidth:"2",strokeDasharray:"5,5"}),[0,25,50,75,100].map(s=>{const i=320-s/100*290;return e.jsx("line",{x1:"60",y1:i,x2:"660",y2:i,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"3,3"},s)}),[0,25,50,75,100].map(s=>{const i=d+s/100*(m-d),o=320-s/100*290;return e.jsx("text",{x:"50",y:o+4,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:Math.round(i)},s)}),e.jsx("path",{d:`
              M ${t.map((s,i)=>`${c(i)},${l(s.grossEmissions)}`).join(" L ")}
              L ${t.slice().reverse().map((s,i)=>`${c(t.length-1-i)},${l(s.netEmissions)}`).join(" L ")}
              Z
            `,fill:"#10B981",opacity:"0.2"}),e.jsx("polyline",{fill:"none",stroke:"#DC2626",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round",points:t.map((s,i)=>`${c(i)},${l(s.grossEmissions)}`).join(" ")}),e.jsx("polyline",{fill:"none",stroke:"#10B981",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round",points:t.map((s,i)=>`${c(i)},${l(s.netEmissions)}`).join(" ")}),t.map((s,i)=>{const o=c(i);return e.jsxs("g",{children:[e.jsx("circle",{cx:o,cy:l(s.grossEmissions),r:"4",fill:"white",stroke:"#DC2626",strokeWidth:"2"}),e.jsx("circle",{cx:o,cy:l(s.netEmissions),r:"4",fill:"white",stroke:"#10B981",strokeWidth:"2"}),s.netEmissions<=0&&i>0&&t[i-1].netEmissions>0&&e.jsxs("g",{children:[e.jsx("circle",{cx:o,cy:l(0),r:"8",fill:"#10B981"}),e.jsx("text",{x:o,y:l(0)+4,textAnchor:"middle",fontSize:"10",fill:"white",fontWeight:"bold",children:"✓"}),e.jsx("text",{x:o,y:l(0)-15,textAnchor:"middle",fontSize:"9",fill:"#10B981",fontWeight:"bold",children:"Carbon Neutral"})]})]},i)}),t.map((s,i)=>{const o=c(i);return e.jsx("text",{x:o,y:"340",textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:s.year},i)}),e.jsx("text",{x:"20",y:"175",textAnchor:"middle",fontSize:"11",fill:"#374151",fontWeight:"500",transform:"rotate(-90 20 175)",children:"Emissions (t CO₂e/year)"}),e.jsxs("text",{x:"360",y:"15",textAnchor:"middle",fontSize:"12",fill:"#374151",fontWeight:"600",children:["Path to Net Zero: ",t[0].netEmissions<=0?"Achieved!":`${y} years at current rate`]})]}),e.jsxs("div",{className:"flex gap-6 justify-center mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("circle",{cx:"8",cy:"8",r:"4",fill:"white",stroke:"#DC2626",strokeWidth:"2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Gross Emissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("rect",{x:"0",y:"4",width:"16",height:"8",fill:"#10B981",opacity:"0.2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Sequestration"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("circle",{cx:"8",cy:"8",r:"4",fill:"white",stroke:"#10B981",strokeWidth:"2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Net Emissions"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-800 mb-3",children:"Carbon Credit Potential"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700",children:"Annual Sequestration"}),e.jsxs("div",{className:"text-xl font-bold text-green-800",children:[r.totalSequestration.toFixed(0)," t CO₂e"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700",children:"Value @ £25/tonne"}),e.jsxs("div",{className:"text-xl font-bold text-green-800",children:["£",(r.totalSequestration*25).toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-green-700",children:"10-Year Value"}),e.jsxs("div",{className:"text-xl font-bold text-green-800",children:["£",(r.totalSequestration*25*10).toFixed(0)]})]})]})]})]})},W=({state:n,actions:r})=>{const a=n.sequestration.totalSequestration*25;return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Carbon Sequestration & Credits"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sequestration Options"}),e.jsx(E,{})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Annual Sequestration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sequestration"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[n.sequestration.totalSequestration.toFixed(1)," t CO₂e"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Potential Credit Value"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",a.toFixed(0)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Hedgerows"}),e.jsxs("span",{children:[n.sequestration.hedgerowSequestration.toFixed(1)," t"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trees"}),e.jsxs("span",{children:[n.sequestration.treeSequestration.toFixed(1)," t"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Soil"}),e.jsxs("span",{children:[n.sequestration.soilCarbonSequestration.toFixed(1)," t"]})]})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(F,{})})]})};export{W as default};
