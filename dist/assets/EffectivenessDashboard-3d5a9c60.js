import{c as g,d as x,u as N,j as e,P as d,r as h,q as u,v as j,w as v,x as p,N as b,y as f,z as y,s as o,T as E}from"./index-39be7b0d.js";import{L as m}from"./leaf-ac27f8f7.js";const w=g("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),C=g("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),F=()=>{const{parameters:s,updateParameter:l}=x(),{performanceMetrics:t}=N(),n=(i,a,c=!1)=>c?i<=a?"text-green-600":i<=a*1.2?"text-yellow-600":"text-red-600":i>=a?"text-green-600":i>=a*.8?"text-yellow-600":"text-red-600",r=(i,a,c=!1)=>c?i<=a?"bg-green-500":i<=a*1.2?"bg-yellow-500":"bg-red-500":i>=a?"bg-green-500":i>=a*.8?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-3",children:"Overall Herd Effectiveness Score"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:`text-4xl font-bold ${n(t.overallHerdEffectiveness,d.OVERALL_HERD_EFFECTIVENESS_TARGET)}`,children:[t.overallHerdEffectiveness.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Target: ≥",d.OVERALL_HERD_EFFECTIVENESS_TARGET,"%"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Heifers Calving <25 months"}),e.jsxs("span",{className:`text-xs font-bold ${n(t.calvingUnder25Pct,90)}`,children:[t.calvingUnder25Pct.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r(t.calvingUnder25Pct,90)}`,style:{width:`${t.calvingUnder25Pct}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",s.ageFirstCalving.toFixed(1)," months"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Achieving 380-day CI Target"}),e.jsxs("span",{className:`text-xs font-bold ${n(t.hitCalvingIntervalPct,90)}`,children:[t.hitCalvingIntervalPct.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r(t.hitCalvingIntervalPct,90)}`,style:{width:`${t.hitCalvingIntervalPct}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",s.calvingInterval," days"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Herd Retention Rate"}),e.jsxs("span",{className:`text-xs font-bold ${n(t.retentionRate,d.RETENTION_RATE_TARGET)}`,children:[t.retentionRate.toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r(t.retentionRate,d.RETENTION_RATE_TARGET)}`,style:{width:`${t.retentionRate}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Replacement: ",t.replacementRate.toFixed(1),"% | Avg lactations: ",s.avgLactations.toFixed(1)]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-blue-200",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Calculation:"}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{children:[t.calvingUnder25Pct.toFixed(0),"% ×",t.hitCalvingIntervalPct.toFixed(0),"% ×",t.retentionRate.toFixed(0),"% =",e.jsxs("strong",{children:[" ",t.overallHerdEffectiveness.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-xs text-gray-500 italic",children:"(% <25mo) × (% hit CI) × (retention rate)"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Improvement Tips:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.ageFirstCalving>25&&e.jsx("li",{children:"• Reduce age at first calving to under 25 months through better heifer management"}),s.calvingInterval>380&&e.jsx("li",{children:"• Improve heat detection and breeding programs to achieve 380-day calving interval"}),t.retentionRate<75&&e.jsx("li",{children:"• Increase cow longevity through better health management and culling decisions"}),t.overallHerdEffectiveness>=70&&e.jsx("li",{children:"• Excellent performance! Maintain current management practices"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>{l("ageFirstCalving",24)},className:"text-xs bg-blue-100 text-blue-700 px-3 py-2 rounded hover:bg-blue-200 transition-colors",children:"Optimize Heifer Age"}),e.jsx("button",{onClick:()=>{l("calvingInterval",380)},className:"text-xs bg-blue-100 text-blue-700 px-3 py-2 rounded hover:bg-blue-200 transition-colors",children:"Optimize Calving Interval"})]})]})},R=()=>{const{parameters:s}=x();return h.useMemo(()=>{const l=u(s),t=j(s),n=v(s),r=f(l),i=p(s,l);return{nue:l,nInputs:t,nOutputs:n,interpretation:r,recommendations:i,milkNContent:b.MILK_N_CONTENT,nBalance:t-n}},[s])},I=()=>{const{nue:s,nInputs:l,nOutputs:t,interpretation:n,recommendations:r,nBalance:i}=R();return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Nitrogen Use Efficiency (NUE)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`${n.bgColor} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current NUE"}),e.jsxs("p",{className:`text-3xl font-bold ${n.color}`,children:[s.toFixed(1),"%"]}),e.jsx("p",{className:`text-sm ${n.color} mt-1`,children:n.category})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:n.description})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"N Inputs"})]}),e.jsxs("p",{className:"text-xl font-semibold text-blue-700",children:[l.toFixed(1)," kg N/cow"]})]}),e.jsxs("div",{className:"bg-green-50 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"N Outputs"})]}),e.jsxs("p",{className:"text-xl font-semibold text-green-700",children:[t.toFixed(1)," kg N/cow"]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"N Surplus (potential loss)"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:[i.toFixed(1)," kg N/cow/year"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(i*4.5).toFixed(0)," kg CO₂e equivalent"]})]}),r.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recommendations to improve NUE:"}),e.jsx("ul",{className:"space-y-1",children:r.map((a,c)=>e.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),a]},c))})]})]})]})},T=s=>{const l=y({annualMilkYield:s.milkYield,averageLactations:s.avgLactations,ageAtFirstCalving:s.ageFirstCalving,calvingInterval:s.calvingInterval,feedQuality:s.feedQuality,systemType:s.systemType,concentrateFeed:s.concentrateFeed,manureSystem:s.manureSystem,grazingMonths:s.grazingMonths,feedCarbonFootprint:s.feedCarbonFootprint,soyaContent:s.soyaContent,deforestationFree:s.deforestationFree,nitrogenRate:s.nitrogenRate,season:s.season}),t=u(s),n=l.lme*o(t,100,1),r=Math.min(o(l.lme,15,0)*50,50),i=Math.min(o(t,150,0)*50,50),a=r+i,c=M(n,a);return{lme:l.lme,nue:t,lmePlus:n,sustainabilityScore:a,interpretation:c}},M=(s,l)=>l>=80&&s>=10?{category:"Excellent",color:"text-green-700",bgColor:"bg-green-50",description:"Industry-leading sustainability performance"}:l>=65&&s>=8?{category:"Good",color:"text-blue-700",bgColor:"bg-blue-50",description:"Above average environmental efficiency"}:l>=50&&s>=6?{category:"Average",color:"text-yellow-700",bgColor:"bg-yellow-50",description:"Room for improvement in both metrics"}:{category:"Poor",color:"text-red-700",bgColor:"bg-red-50",description:"Significant opportunities for improvement"},L=()=>{const{parameters:s}=x(),l=h.useMemo(()=>T(s),[s]),{lme:t,nue:n,lmePlus:r,sustainabilityScore:i,interpretation:a}=l;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"LME+NUE Combined Metric"}),e.jsx(m,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`${a.bgColor} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"LME+NUE Score"}),e.jsx("p",{className:`text-3xl font-bold ${a.color}`,children:r.toFixed(1)}),e.jsx("p",{className:`text-sm ${a.color} mt-1`,children:a.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sustainability"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-700",children:[i.toFixed(0),"/100"]})]})]}),e.jsx("p",{className:`text-xs ${a.color} mt-2`,children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"LME"})]}),e.jsxs("p",{className:"text-xl font-semibold text-blue-700",children:[t.toFixed(1)," L/kg CO₂e"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Emissions efficiency"})]}),e.jsxs("div",{className:"bg-green-50 rounded p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"NUE"})]}),e.jsxs("p",{className:"text-xl font-semibold text-green-700",children:[n.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Nitrogen efficiency"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Emissions Performance"}),e.jsxs("span",{children:[Math.min(t/15*100,100).toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(t/15*100,100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Nitrogen Performance"}),e.jsxs("span",{children:[Math.min(n/150*100,100).toFixed(0),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(n/150*100,100)}%`}})})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsx("p",{className:"text-xs text-gray-500",children:"This metric combines emissions efficiency (LME) with nitrogen use efficiency (NUE) to provide a comprehensive sustainability assessment. Higher scores indicate better environmental performance across both carbon and nitrogen cycles."})})]})]})},U=({state:s,actions:l})=>e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Sustainability Effectiveness Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"LME Score"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold text-blue-600",children:s.lmeResult.lme.toFixed(0)}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Target: ≥350 for sustainable dairy"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Industry Benchmark"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Your LME"}),e.jsx("span",{className:"font-bold",children:s.lmeResult.lme.toFixed(0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Industry Average"}),e.jsx("span",{className:"font-medium",children:"320"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Top 10%"}),e.jsx("span",{className:"font-medium text-green-600",children:"380+"})]})]})]}),e.jsx(I,{}),e.jsx(L,{}),e.jsx("div",{className:"col-span-1 lg:col-span-2",children:e.jsx(F,{})})]})]})});export{U as default};
