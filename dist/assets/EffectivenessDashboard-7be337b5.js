import{a as e,u as s,j as t,P as a,k as l,l as i,m as n,n as r,N as c,o as d,q as x,s as o}from"./index-294fea26.js";import{r as m}from"./react-vendor-3e9c946d.js";import{e as g,f as h,L as j,T as N}from"./ui-vendor-fd39ecb8.js";import"./state-15ddd646.js";const v=()=>{const{parameters:l,updateParameter:i}=e(),{performanceMetrics:n}=s(),r=(e,s,t=!1)=>t?e<=s?"text-green-600":e<=1.2*s?"text-yellow-600":"text-red-600":e>=s?"text-green-600":e>=.8*s?"text-yellow-600":"text-red-600",c=(e,s,t=!1)=>t?e<=s?"bg-green-500":e<=1.2*s?"bg-yellow-500":"bg-red-500":e>=s?"bg-green-500":e>=.8*s?"bg-yellow-500":"bg-red-500";return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-3",children:"Overall Herd Effectiveness Score"}),t.jsxs("div",{className:"text-center mb-4",children:[t.jsxs("div",{className:`text-4xl font-bold ${r(n.overallHerdEffectiveness,a.OVERALL_HERD_EFFECTIVENESS_TARGET)}`,children:[n.overallHerdEffectiveness.toFixed(1),"%"]}),t.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Target: ≥",a.OVERALL_HERD_EFFECTIVENESS_TARGET,"%"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Heifers Calving <25 months"}),t.jsxs("span",{className:`text-xs font-bold ${r(n.calvingUnder25Pct,90)}`,children:[n.calvingUnder25Pct.toFixed(0),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${c(n.calvingUnder25Pct,90)}`,style:{width:`${n.calvingUnder25Pct}%`}})}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.ageFirstCalving.toFixed(1)," months"]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Achieving 380-day CI Target"}),t.jsxs("span",{className:`text-xs font-bold ${r(n.hitCalvingIntervalPct,90)}`,children:[n.hitCalvingIntervalPct.toFixed(0),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${c(n.hitCalvingIntervalPct,90)}`,style:{width:`${n.hitCalvingIntervalPct}%`}})}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.calvingInterval," days"]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Herd Retention Rate"}),t.jsxs("span",{className:`text-xs font-bold ${r(n.retentionRate,a.RETENTION_RATE_TARGET)}`,children:[n.retentionRate.toFixed(0),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full ${c(n.retentionRate,a.RETENTION_RATE_TARGET)}`,style:{width:`${n.retentionRate}%`}})}),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Replacement: ",n.replacementRate.toFixed(1),"% | Avg lactations: ",l.avgLactations.toFixed(1)]})]})]}),t.jsxs("div",{className:"mt-4 pt-3 border-t border-blue-200",children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Calculation:"}),t.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[t.jsxs("div",{children:[n.calvingUnder25Pct.toFixed(0),"% ×",n.hitCalvingIntervalPct.toFixed(0),"% ×",n.retentionRate.toFixed(0),"% =",t.jsxs("strong",{children:[" ",n.overallHerdEffectiveness.toFixed(1),"%"]})]}),t.jsx("div",{className:"text-xs text-gray-500 italic",children:"(% <25mo) × (% hit CI) × (retention rate)"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Improvement Tips:"}),t.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[l.ageFirstCalving>25&&t.jsx("li",{children:"• Reduce age at first calving to under 25 months through better heifer management"}),l.calvingInterval>380&&t.jsx("li",{children:"• Improve heat detection and breeding programs to achieve 380-day calving interval"}),n.retentionRate<75&&t.jsx("li",{children:"• Increase cow longevity through better health management and culling decisions"}),n.overallHerdEffectiveness>=70&&t.jsx("li",{children:"• Excellent performance! Maintain current management practices"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>{i("ageFirstCalving",24)},className:"text-xs bg-blue-100 text-blue-700 px-3 py-2 rounded hover:bg-blue-200 transition-colors",children:"Optimize Heifer Age"}),t.jsx("button",{onClick:()=>{i("calvingInterval",380)},className:"text-xs bg-blue-100 text-blue-700 px-3 py-2 rounded hover:bg-blue-200 transition-colors",children:"Optimize Calving Interval"})]})]})},u=()=>{const{nue:s,nInputs:a,nOutputs:x,interpretation:o,recommendations:j,nBalance:N}=(()=>{const{parameters:s}=e();return m.useMemo(()=>{const e=l(s),t=i(s),a=n(s);return{nue:e,nInputs:t,nOutputs:a,interpretation:d(e),recommendations:r(s,e),milkNContent:c.MILK_N_CONTENT,nBalance:t-a}},[s])})();return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Nitrogen Use Efficiency (NUE)"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:`${o.bgColor} rounded-lg p-4`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Current NUE"}),t.jsxs("p",{className:`text-3xl font-bold ${o.color}`,children:[s.toFixed(1),"%"]}),t.jsx("p",{className:`text-sm ${o.color} mt-1`,children:o.category})]}),t.jsx("div",{className:"text-right",children:t.jsx("p",{className:"text-xs text-gray-500",children:o.description})})]})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded p-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(g,{className:"w-4 h-4 text-blue-600"}),t.jsx("p",{className:"text-sm text-gray-600",children:"N Inputs"})]}),t.jsxs("p",{className:"text-xl font-semibold text-blue-700",children:[a.toFixed(1)," kg N/cow"]})]}),t.jsxs("div",{className:"bg-green-50 rounded p-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{className:"w-4 h-4 text-green-600"}),t.jsx("p",{className:"text-sm text-gray-600",children:"N Outputs"})]}),t.jsxs("p",{className:"text-xl font-semibold text-green-700",children:[x.toFixed(1)," kg N/cow"]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"N Surplus (potential loss)"}),t.jsxs("p",{className:"text-lg font-semibold text-gray-700",children:[N.toFixed(1)," kg N/cow/year"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(4.5*N).toFixed(0)," kg CO₂e equivalent"]})]}),j.length>0&&t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recommendations to improve NUE:"}),t.jsx("ul",{className:"space-y-1",children:j.map((e,s)=>t.jsxs("li",{className:"text-sm text-gray-600 flex items-start",children:[t.jsx("span",{className:"text-blue-500 mr-2",children:"•"}),e]},s))})]})]})]})},p=(e,s)=>s>=80&&e>=10?{category:"Excellent",color:"text-green-700",bgColor:"bg-green-50",description:"Industry-leading sustainability performance"}:s>=65&&e>=8?{category:"Good",color:"text-blue-700",bgColor:"bg-blue-50",description:"Above average environmental efficiency"}:s>=50&&e>=6?{category:"Average",color:"text-yellow-700",bgColor:"bg-yellow-50",description:"Room for improvement in both metrics"}:{category:"Poor",color:"text-red-700",bgColor:"bg-red-50",description:"Significant opportunities for improvement"},b=()=>{const{parameters:s}=e(),a=m.useMemo(()=>(e=>{const s=x({annualMilkYield:e.milkYield,averageLactations:e.avgLactations,ageAtFirstCalving:e.ageFirstCalving,calvingInterval:e.calvingInterval,feedQuality:e.feedQuality,systemType:e.systemType,concentrateFeed:e.concentrateFeed,manureSystem:e.manureSystem,grazingMonths:e.grazingMonths,feedCarbonFootprint:e.feedCarbonFootprint,soyaContent:e.soyaContent,deforestationFree:e.deforestationFree,nitrogenRate:e.nitrogenRate,season:e.season}),t=l(e),a=s.lme*o(t,100,1),i=Math.min(50*o(s.lme,15,0),50)+Math.min(50*o(t,150,0),50),n=p(a,i);return{lme:s.lme,nue:t,lmePlus:a,sustainabilityScore:i,interpretation:n}})(s),[s]),{lme:i,nue:n,lmePlus:r,sustainabilityScore:c,interpretation:d}=a;return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"LME+NUE Combined Metric"}),t.jsx(j,{className:"w-5 h-5 text-green-600"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:`${d.bgColor} rounded-lg p-4`,children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"LME+NUE Score"}),t.jsx("p",{className:`text-3xl font-bold ${d.color}`,children:r.toFixed(1)}),t.jsx("p",{className:`text-sm ${d.color} mt-1`,children:d.category})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Sustainability"}),t.jsxs("p",{className:"text-2xl font-semibold text-gray-700",children:[c.toFixed(0),"/100"]})]})]}),t.jsx("p",{className:`text-xs ${d.color} mt-2`,children:d.description})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded p-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(N,{className:"w-4 h-4 text-blue-600"}),t.jsx("p",{className:"text-sm text-gray-600",children:"LME"})]}),t.jsxs("p",{className:"text-xl font-semibold text-blue-700",children:[i.toFixed(1)," L/kg CO₂e"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Emissions efficiency"})]}),t.jsxs("div",{className:"bg-green-50 rounded p-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(j,{className:"w-4 h-4 text-green-600"}),t.jsx("p",{className:"text-sm text-gray-600",children:"NUE"})]}),t.jsxs("p",{className:"text-xl font-semibold text-green-700",children:[n.toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Nitrogen efficiency"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[t.jsx("span",{children:"Emissions Performance"}),t.jsxs("span",{children:[Math.min(i/15*100,100).toFixed(0),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(i/15*100,100)}%`}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[t.jsx("span",{children:"Nitrogen Performance"}),t.jsxs("span",{children:[Math.min(n/150*100,100).toFixed(0),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(n/150*100,100)}%`}})})]})]}),t.jsx("div",{className:"border-t pt-4",children:t.jsx("p",{className:"text-xs text-gray-500",children:"This metric combines emissions efficiency (LME) with nitrogen use efficiency (NUE) to provide a comprehensive sustainability assessment. Higher scores indicate better environmental performance across both carbon and nitrogen cycles."})})]})]})},f=({state:e,actions:s})=>t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Sustainability Effectiveness Metrics"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"LME Score"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-5xl font-bold text-blue-600",children:e.lmeResult.lme.toFixed(0)}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Target: ≥350 for sustainable dairy"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Industry Benchmark"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Your LME"}),t.jsx("span",{className:"font-bold",children:e.lmeResult.lme.toFixed(0)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Industry Average"}),t.jsx("span",{className:"font-medium",children:"320"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Top 10%"}),t.jsx("span",{className:"font-medium text-green-600",children:"380+"})]})]})]}),t.jsx(u,{}),t.jsx(b,{}),t.jsx("div",{className:"col-span-1 lg:col-span-2",children:t.jsx(v,{})})]})]})});export{f as default};
