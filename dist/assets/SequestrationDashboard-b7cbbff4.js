import{c as S,d as y,u as N,j as e,r as w,s as k}from"./index-8a09f9d1.js";import{S as u}from"./Slider-3b5b51d4.js";import{t as M,I as q}from"./carbonFloor-f1145b74.js";const F=S("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),A=()=>{const{parameters:s,updateParameter:l}=y(),{sequestration:n}=N();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:"Carbon Sequestration Activities"}),e.jsx("p",{className:"text-xs text-green-700",children:"Add nature-based and technology solutions to offset your farm's emissions."})]}),e.jsx(u,{label:"Tree Planting (hectares)",value:s.treePlantingHa,onChange:a=>l("treePlantingHa",a),min:0,max:50,step:1,unit:" ha",decimals:0,info:s.treePlantingHa>0?`↓ ${n.treeSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(u,{label:"Hedgerow Planting (km)",value:s.hedgerowKm,onChange:a=>l("hedgerowKm",a),min:0,max:20,step:.5,unit:" km",decimals:1,info:s.hedgerowKm>0?`↓ ${n.hedgerowSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(u,{label:"Soil Carbon Management (ha)",value:s.soilCarbonHa,onChange:a=>l("soilCarbonHa",a),min:0,max:100,step:5,unit:" ha",decimals:0,info:s.soilCarbonHa>0?`↓ ${n.soilCarbonSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(u,{label:"Cover Crops (hectares)",value:s.coverCropsHa,onChange:a=>l("coverCropsHa",a),min:0,max:80,step:5,unit:" ha",decimals:0,info:s.coverCropsHa>0?`↓ ${n.coverCropSequestration.toFixed(1)} t CO₂e/year`:void 0}),e.jsx(u,{label:"Renewable Energy (kW)",value:s.renewableEnergyKw,onChange:a=>l("renewableEnergyKw",a),min:0,max:200,step:10,unit:" kW",decimals:0,info:s.renewableEnergyKw>0?`↓ ${n.renewableOffset.toFixed(1)} t CO₂e/year`:void 0}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{htmlFor:"methane-inhibitor-checkbox",className:"flex items-center text-sm",children:[e.jsx("input",{id:"methane-inhibitor-checkbox",name:"methane-inhibitor-checkbox",type:"checkbox",checked:s.methaneInhibitor,onChange:a=>l("methaneInhibitor",a.target.checked),className:"mr-2"}),e.jsx("span",{className:"font-medium",children:"Methane Inhibitor Feed Additive"})]}),s.methaneInhibitor&&e.jsxs("div",{className:"text-xs text-green-600 ml-6",children:["↓ ",n.methaneReduction.toFixed(1)," t CO₂e/year (15% reduction)"]}),e.jsxs("label",{htmlFor:"improved-manure-checkbox",className:"flex items-center text-sm",children:[e.jsx("input",{id:"improved-manure-checkbox",name:"improved-manure-checkbox",type:"checkbox",checked:s.improvedManure,onChange:a=>l("improvedManure",a.target.checked),className:"mr-2"}),e.jsx("span",{className:"font-medium",children:"Improved Manure Management"})]}),s.improvedManure&&e.jsxs("div",{className:"text-xs text-green-600 ml-6",children:["↓ ",n.improvedManureReduction.toFixed(1)," t CO₂e/year (30% reduction)"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Sequestration Summary"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Nature-based Solutions:"}),e.jsxs("span",{className:"font-semibold text-blue-800",children:[(n.treeSequestration+n.hedgerowSequestration+n.soilCarbonSequestration+n.coverCropSequestration).toFixed(1)," t CO₂e"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Technology Solutions:"}),e.jsxs("span",{className:"font-semibold text-blue-800",children:[(n.renewableOffset+n.methaneReduction+n.improvedManureReduction).toFixed(1)," t CO₂e"]})]}),e.jsxs("div",{className:"flex justify-between border-t pt-1 mt-1",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Total Sequestration:"}),e.jsxs("span",{className:"font-bold text-blue-900",children:[n.totalSequestration.toFixed(1)," t CO₂e/year"]})]})]})]})]})},T=.02,E=5,f=new Date().getFullYear(),v=10,R=()=>{const{parameters:s}=y(),{emissions:l,sequestration:n}=N();return w.useMemo(()=>{const a=M(s.herdSize),j=l.totalAnnualEmissions*s.herdSize/1e3,p=n.totalSequestration,c=[];for(let d=0;d<v;d++){const r=f+d,x=Math.pow(1-T,d),h=j*x,t=Math.min(1,d/E),i=p*t,o=Math.max(0,h-i),C=k(h-a/1e3,a/1e3,0)*100;c.push({year:r,gross:h,theoreticalMinimum:a/1e3,sequestration:i,net:o,percentAboveTM:C})}const g=c[c.length-1],b=g.net<=0,m=g.gross<=g.theoreticalMinimum;return{years:c,currentYear:f,targetYear:f+v-1,canReachNetZero:b,canReachTM:m}},[s,l,n])},O=()=>{const{years:s,canReachNetZero:l,canReachTM:n}=R(),{sequestration:a}=N();if(s.length===0)return null;const j=Math.max(...s.map(t=>t.gross)),p=Math.min(...s.map(t=>Math.min(t.net,0))),c=s[0].theoreticalMinimum,b=(j-p)*.1,m=j+b,d=Math.min(0,p-b),r=t=>320-(t-d)/(m-d)*280,x=t=>60+t/(s.length-1)*600;s.findIndex(t=>t.net<=0);const h=s.findIndex(t=>t.gross<=t.theoreticalMinimum);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(F,{className:"mr-2 text-green-600",size:20}),"Net-Carbon Glide Path 2.0"]}),e.jsxs("div",{className:"relative",style:{height:"400px"},children:[e.jsxs("svg",{width:"100%",height:"360",viewBox:"0 0 700 360",preserveAspectRatio:"xMidYMid meet",children:[e.jsx("rect",{x:"60",y:"30",width:"600",height:"290",fill:"#f9fafb",rx:"4"}),d<0&&m>0&&e.jsx("line",{x1:"60",y1:r(0),x2:"660",y2:r(0),stroke:"#10B981",strokeWidth:"2",strokeDasharray:"5,5"}),e.jsx("line",{x1:"60",y1:r(c),x2:"660",y2:r(c),stroke:"#8B5CF6",strokeWidth:"2.5",strokeDasharray:"8,4"}),[0,25,50,75,100].map(t=>{const i=320-t/100*290;return e.jsx("line",{x1:"60",y1:i,x2:"660",y2:i,stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"3,3"},t)}),[0,25,50,75,100].map(t=>{const i=d+t/100*(m-d),o=320-t/100*290;return e.jsx("text",{x:"50",y:o+4,textAnchor:"end",fontSize:"10",fill:"#6b7280",children:Math.round(i)},t)}),e.jsx("text",{x:"665",y:r(c)+4,textAnchor:"start",fontSize:"10",fill:"#8B5CF6",fontWeight:"500",children:"TM"}),e.jsx("path",{d:`
              M ${s.map((t,i)=>`${x(i)},${r(t.gross)}`).join(" L ")}
              L ${s.slice().reverse().map((t,i)=>`${x(s.length-1-i)},${r(t.net)}`).join(" L ")}
              Z
            `,fill:"#10B981",opacity:"0.2"}),e.jsx("polyline",{fill:"none",stroke:"#DC2626",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round",points:s.map((t,i)=>`${x(i)},${r(t.gross)}`).join(" ")}),e.jsx("polyline",{fill:"none",stroke:"#10B981",strokeWidth:"3",strokeLinejoin:"round",strokeLinecap:"round",points:s.map((t,i)=>`${x(i)},${r(t.net)}`).join(" ")}),s.map((t,i)=>{const o=x(i);return e.jsxs("g",{children:[e.jsx("rect",{x:o-20,y:"30",width:"40",height:"290",fill:"transparent",className:"cursor-pointer",children:e.jsxs("title",{children:[t.year,": Gross: ",t.gross.toFixed(1),"t TM: ",t.theoreticalMinimum.toFixed(1),"t Above TM: ",t.percentAboveTM.toFixed(0),"% Sequestration: ",t.sequestration.toFixed(1),"t Net: ",t.net.toFixed(1),"t"]})}),e.jsx("circle",{cx:o,cy:r(t.gross),r:"4",fill:"white",stroke:"#DC2626",strokeWidth:"2"}),e.jsx("circle",{cx:o,cy:r(t.net),r:"4",fill:"white",stroke:"#10B981",strokeWidth:"2"}),t.net<=0&&i>0&&s[i-1].net>0&&e.jsxs("g",{children:[e.jsx("circle",{cx:o,cy:r(0),r:"8",fill:"#10B981"}),e.jsx("text",{x:o,y:r(0)+4,textAnchor:"middle",fontSize:"10",fill:"white",fontWeight:"bold",children:"✓"}),e.jsx("text",{x:o,y:r(0)-15,textAnchor:"middle",fontSize:"9",fill:"#10B981",fontWeight:"bold",children:"Net Zero"})]}),t.gross<=t.theoreticalMinimum&&i>0&&s[i-1].gross>s[i-1].theoreticalMinimum&&e.jsxs("g",{children:[e.jsx("circle",{cx:o,cy:r(c),r:"8",fill:"#8B5CF6"}),e.jsx("text",{x:o,y:r(c)+4,textAnchor:"middle",fontSize:"10",fill:"white",fontWeight:"bold",children:"✓"})]})]},i)}),s.filter((t,i)=>i%2===0).map((t,i)=>{const o=x(i*2);return e.jsx("text",{x:o,y:"340",textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:t.year},i)}),e.jsx("text",{x:"20",y:"175",textAnchor:"middle",fontSize:"11",fill:"#374151",fontWeight:"500",transform:"rotate(-90 20 175)",children:"Emissions (t CO₂e/year)"})]}),e.jsxs("div",{className:"flex gap-6 justify-center mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("circle",{cx:"8",cy:"8",r:"4",fill:"white",stroke:"#DC2626",strokeWidth:"2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Gross Emissions"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("line",{x1:"0",y1:"8",x2:"16",y2:"8",stroke:"#8B5CF6",strokeWidth:"2.5",strokeDasharray:"6,2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Theoretical Minimum"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("rect",{x:"0",y:"4",width:"16",height:"8",fill:"#10B981",opacity:"0.2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Sequestration"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{width:"20",height:"16",children:e.jsx("circle",{cx:"8",cy:"8",r:"4",fill:"white",stroke:"#10B981",strokeWidth:"2"})}),e.jsx("span",{className:"text-xs text-gray-700",children:"Net Emissions"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Current Status"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Above TM:"}),e.jsxs("span",{className:"font-semibold",children:[s[0].percentAboveTM.toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Net Emissions:"}),e.jsxs("span",{className:"font-semibold",children:[s[0].net.toFixed(1),"t"]})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold text-purple-800 mb-2 flex items-center",children:["Theoretical Minimum",e.jsxs("button",{className:"ml-1 text-purple-600 hover:text-purple-800",children:[e.jsx(q,{size:14}),e.jsx("span",{className:"sr-only",children:"Biological floor information"})]})]}),e.jsxs("div",{className:"text-xs text-purple-700 mb-1",children:["Biological floor: ",c.toFixed(1),"t CO₂e"]}),e.jsx("div",{className:"text-xs text-purple-600",children:n?`Can reach TM by ${s[h].year}`:"Additional measures needed to reach TM"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-green-800 mb-2",children:"Carbon Credits"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Annual:"}),e.jsxs("span",{className:"font-semibold",children:["£",(a.totalSequestration*25).toFixed(0)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"10-Year:"}),e.jsxs("span",{className:"font-semibold",children:["£",(a.totalSequestration*25*10).toFixed(0)]})]})]})]})]})]})},I=({state:s,actions:l})=>{const n=s.sequestration.totalSequestration*25;return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Carbon Sequestration & Credits"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sequestration Options"}),e.jsx(A,{})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Annual Sequestration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Sequestration"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[s.sequestration.totalSequestration.toFixed(1)," t CO₂e"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Potential Credit Value"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["£",n.toFixed(0)]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Hedgerows"}),e.jsxs("span",{children:[s.sequestration.hedgerowSequestration.toFixed(1)," t"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trees"}),e.jsxs("span",{children:[s.sequestration.treeSequestration.toFixed(1)," t"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Soil"}),e.jsxs("span",{children:[s.sequestration.soilCarbonSequestration.toFixed(1)," t"]})]})]})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(O,{})})]})};export{I as default};
